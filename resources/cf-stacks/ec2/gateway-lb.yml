Type: AWS::ElasticLoadBalancing::LoadBalancer
Properties:
  Scheme: internal
  SecurityGroups:
    - !Ref ApolloGatewayLBSecurityGroup
  Subnets: ${self:custom.aws.subnets}

  Listeners:
    - LoadBalancerPort: "443"
      InstancePort: "4000"
      Protocol: HTTPS
      InstanceProtocol: HTTP
      SSLCertificateId: ${self:custom.aws.gateway-ssl-cert-arn}
  HealthCheck:
    Target: TCP:4000
    HealthyThreshold: 2
    Interval: 30
    Timeout: 5
    UnhealthyThreshold: 2
