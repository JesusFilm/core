extend schema
  @link(url: "https://specs.apollo.dev/federation/v2.6", import: ["@extends", "@external", "@key", "@shareable"])

interface Action {
  parentBlockId: ID!
  gtmEventName: String
  parentBlock: Block!
}

type AuthenticatedUser
  @key(fields: "id")
  @extends
{
  id: ID! @external
}

interface Block {
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
}

input BlockDuplicateIdMap {
  oldId: ID!
  newId: ID!
}

enum BlockEventLabel {
  custom1
  custom2
  custom3
  decisionForChrist
  gospelPresentationStart
  gospelPresentationComplete
  inviteFriend
  prayerRequest
  rsvp
  share
  specialVideoStart
  specialVideoComplete
}

input BlockUpdateActionInput {
  gtmEventName: String
  email: String
  url: String
  phone: String
  countryCode: String
  target: String
  chatUrl: String
  blockId: String
}

input BlocksFilter {
  journeyIds: [ID!]
  typenames: [String!]
}

type Browser
  @shareable
{
  name: String
  version: String
}

enum ButtonAction {
  NavigateToBlockAction
  LinkAction
  EmailAction
  PhoneAction
  ChatAction
}

enum ButtonAlignment {
  left
  center
  right
  justify
}

type ButtonBlock implements Block
  @shareable
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  eventLabel: BlockEventLabel
  label: String!
  variant: ButtonVariant
  color: ButtonColor
  size: ButtonSize
  startIconId: ID
  endIconId: ID
  submitEnabled: Boolean
  settings: ButtonBlockSettings
  action: Action
}

input ButtonBlockCreateInput {
  id: ID
  journeyId: ID!
  parentBlockId: ID!
  eventLabel: BlockEventLabel
  label: String!
  variant: ButtonVariant
  color: ButtonColor
  size: ButtonSize
  submitEnabled: Boolean
  settings: ButtonBlockSettingsInput
}

type ButtonBlockSettings
  @shareable
{
  """Alignment of the button"""
  alignment: ButtonAlignment

  """Color of the button"""
  color: String
}

input ButtonBlockSettingsInput {
  alignment: ButtonAlignment
  color: String
}

input ButtonBlockUpdateInput {
  parentBlockId: ID
  eventLabel: BlockEventLabel
  label: String
  variant: ButtonVariant
  color: ButtonColor
  size: ButtonSize
  startIconId: ID
  endIconId: ID
  submitEnabled: Boolean
  settings: ButtonBlockSettingsInput
}

type ButtonClickEvent implements Event
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
  action: ButtonAction
  actionValue: String
}

input ButtonClickEventCreateInput {
  """
  ID should be unique Event UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  blockId: ID!

  """id of the parent stepBlock"""
  stepId: ID

  """stepName of the parent stepBlock"""
  label: String

  """label of the button"""
  value: String

  """Action type of the button when it was clicked"""
  action: ButtonAction

  """
  The label for each corresponding action, mapping below: 
  NavigateToBlockAction - StepName (generated in client) of the StepBlock 
  LinkAction - url of the link
  """
  actionValue: String
}

enum ButtonColor {
  primary
  secondary
  error
  inherit
}

enum ButtonSize {
  small
  medium
  large
}

enum ButtonVariant {
  text
  contained
  outlined
}

type CardBlock implements Block
  @shareable
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  eventLabel: BlockEventLabel

  """backgroundColor should be a HEX color value e.g #FFFFFF for white."""
  backgroundColor: String

  """
  backdropBlur should be a number representing blur amount in pixels e.g 20.
  """
  backdropBlur: Int

  """
  coverBlockId is present if a child block should be used as a cover.
  This child block should not be rendered normally, instead it should be used
  as a background. Blocks are often of type ImageBlock or VideoBlock.
  """
  coverBlockId: ID

  """
  fullscreen should control how the coverBlock is displayed. When fullscreen
  is set to true the coverBlock Image should be displayed as a blur in the
  background.
  """
  fullscreen: Boolean!

  """
  themeMode can override journey themeMode. If nothing is set then use
  themeMode from journey
  """
  themeMode: ThemeMode

  """
  themeName can override journey themeName. If nothing is set then use
  themeName from journey
  """
  themeName: ThemeName
}

input CardBlockCreateInput {
  id: ID
  journeyId: ID!
  parentBlockId: ID!
  eventLabel: BlockEventLabel
  backgroundColor: String
  backdropBlur: Int
  fullscreen: Boolean
  themeMode: ThemeMode
  themeName: ThemeName
}

input CardBlockUpdateInput {
  parentBlockId: ID
  eventLabel: BlockEventLabel
  coverBlockId: ID
  backgroundColor: String
  backdropBlur: Int
  fullscreen: Boolean
  themeMode: ThemeMode
  themeName: ThemeName
}

type ChatAction implements Action
  @shareable
{
  parentBlockId: ID!
  gtmEventName: String
  parentBlock: Block!
  chatUrl: String!
  target: String
  customizable: Boolean
  parentStepId: String
}

input ChatActionInput {
  gtmEventName: String
  chatUrl: String!
  target: String
  customizable: Boolean
  parentStepId: String
}

type ChatButton
  @shareable
{
  id: ID!
  link: String
  platform: MessagePlatform
}

input ChatButtonCreateInput {
  link: String
  platform: MessagePlatform
}

input ChatButtonUpdateInput {
  link: String
  platform: MessagePlatform
}

type ChatOpenEvent implements Event
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
  messagePlatform: MessagePlatform
}

input ChatOpenEventCreateInput {
  """
  ID should be unique Event UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  blockId: ID!

  """id of the parent stepBlock"""
  stepId: ID

  """messagePlatform of the link used for chat"""
  value: MessagePlatform
}

enum ContactActionType {
  call
  text
}

input CreateGoogleSheetsSyncInput {
  journeyId: ID!
  integrationId: ID!
  spreadsheetId: ID!
  sheetName: String!
  folderId: String
}

type CustomDomain
  @shareable
{
  id: ID!
  name: String!
  apexName: String!
  routeAllTeamJourneys: Boolean!
  team: Team!
  journeyCollection: JourneyCollection
}

input CustomDomainCreateInput {
  id: ID
  teamId: String!
  name: String!
  journeyCollectionId: ID
  routeAllTeamJourneys: Boolean
}

input CustomDomainUpdateInput {
  journeyCollectionId: ID
  routeAllTeamJourneys: Boolean
}

"""
A date string, such as 2007-12-03, compliant with the `full-date` format outlined in section 5.6 of the RFC 3339 profile of the ISO 8601 standard for representation of dates and times using the Gregorian calendar.
"""
scalar Date

"""
A date-time string at UTC, such as 2007-12-03T10:15:30Z, compliant with the `date-time` format outlined in section 5.6 of the RFC 3339 profile of the ISO 8601 standard for representation of dates and times using the Gregorian calendar.
"""
scalar DateTime

"""
A date-time string at UTC, such as 2007-12-03T10:15:30Z, compliant with the `date-time` format outlined in section 5.6 of the RFC 3339 profile of the ISO 8601 standard for representation of dates and times using the Gregorian calendar.This scalar is serialized to a string in ISO 8601 format and parsed from a string in ISO 8601 format.
"""
scalar DateTimeISO

type Device
  @shareable
{
  model: String
  type: DeviceType
  vendor: String
}

enum DeviceType {
  console
  mobile
  tablet
  smarttv
  wearable
  embedded
}

type EmailAction implements Action
  @shareable
{
  parentBlockId: ID!
  gtmEventName: String
  parentBlock: Block!
  email: String!
  customizable: Boolean
  parentStepId: String
}

input EmailActionInput {
  gtmEventName: String
  email: String!
  customizable: Boolean
  parentStepId: String
}

interface Event {
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
}

enum EventType {
  ButtonClickEvent
  ChatOpenEvent
  JourneyViewEvent
  RadioQuestionSubmissionEvent
  SignUpSubmissionEvent
  StepViewEvent
  StepNextEvent
  StepPreviousEvent
  MultiselectSubmissionEvent
  TextResponseSubmissionEvent
  VideoStartEvent
  VideoPlayEvent
  VideoPauseEvent
  VideoCompleteEvent
  VideoExpandEvent
  VideoCollapseEvent
  VideoProgressEvent
}

enum GoogleSheetExportMode {
  create
  existing
}

type GoogleSheetsSync {
  id: ID!
  teamId: ID!
  journeyId: ID!
  integrationId: ID
  spreadsheetId: ID!
  sheetName: String
  folderId: String
  email: String
  deletedAt: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
  integration: Integration
  journey: Journey!
}

input GoogleSheetsSyncsFilter {
  journeyId: ID
  integrationId: ID
}

enum GridAlignItems {
  baseline
  flexStart
  flexEnd
  center
}

type GridContainerBlock implements Block
  @shareable
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  gap: Int!
  direction: GridDirection!
  justifyContent: GridJustifyContent!
  alignItems: GridAlignItems!
}

enum GridDirection {
  columnReverse
  column
  row
  rowReverse
}

type GridItemBlock implements Block
  @shareable
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  xl: Int!
  lg: Int!
  sm: Int!
}

enum GridJustifyContent {
  flexStart
  flexEnd
  center
}

type Host
  @shareable
{
  id: ID!
  teamId: ID!
  title: String!
  location: String
  src1: String
  src2: String
}

input HostCreateInput {
  title: String!
  location: String
  src1: String
  src2: String
}

input HostUpdateInput {
  """
  title can be undefined as to not update title, but it cannot be null as to clear the value of title
  """
  title: String
  location: String
  src1: String
  src2: String
}

type IconBlock implements Block
  @shareable
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  name: IconName
  color: IconColor
  size: IconSize
}

input IconBlockCreateInput {
  """
  ID should be unique Response UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  parentBlockId: ID!
  journeyId: ID!
  name: IconName
  color: IconColor
  size: IconSize
}

input IconBlockUpdateInput {
  name: IconName
  color: IconColor
  size: IconSize
}

enum IconColor {
  primary
  secondary
  action
  error
  disabled
  inherit
}

enum IconName {
  PlayArrowRounded
  TranslateRounded
  CheckCircleRounded
  RadioButtonUncheckedRounded
  FormatQuoteRounded
  LockOpenRounded
  ArrowForwardRounded
  ArrowBackRounded
  ChatBubbleOutlineRounded
  LiveTvRounded
  MenuBookRounded
  ChevronRightRounded
  ChevronLeftRounded
  BeenhereRounded
  SendRounded
  SubscriptionsRounded
  ContactSupportRounded
  Launch
  MailOutline
  ArrowLeftContained2
  ArrowRightContained2
  MessageChat1
  Home4
  LinkAngled
  Volume5
  Note2
  UserProfile2
  UsersProfiles3
  Phone
}

enum IconSize {
  sm
  md
  lg
  xl
  inherit
}

enum IdType {
  databaseId
  slug
}

type ImageBlock implements Block
  @shareable
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  src: String
  alt: String!
  width: Int!
  height: Int!

  """
  blurhash is a compact representation of a placeholder for an image.
  Find a frontend implementation at https://github.com/woltapp/blurhash
    
  """
  blurhash: String!
  focalTop: Int
  focalLeft: Int
  scale: Int
}

input ImageBlockCreateInput {
  """
  ID should be unique Response UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  parentBlockId: ID
  journeyId: ID!
  src: String
  alt: String!

  """
  If blurhash, width, & height are provided, the image will skip blurhash processing. Otherwise these values will be calculated.
  """
  blurhash: String
  width: Int
  height: Int

  """
  True if the coverBlockId in a parent block should be set to this block's id.
  """
  isCover: Boolean
  scale: Int
  focalTop: Int
  focalLeft: Int
}

input ImageBlockUpdateInput {
  parentBlockId: ID
  src: String
  alt: String

  """
  If blurhash, width, & height are provided, the image will skip blurhash processing. Otherwise these values will be calculated.
  """
  blurhash: String
  width: Int
  height: Int
  isCover: Boolean
  scale: Int
  focalTop: Int
  focalLeft: Int
}

interface Integration {
  id: ID!
  type: IntegrationType!
  team: Team!
}

type IntegrationGoogle implements Integration
  @shareable
{
  id: ID!
  type: IntegrationType!
  team: Team!
  accountEmail: String
  user: AuthenticatedUser
}

input IntegrationGoogleCreateInput {
  teamId: String!
  code: String!
  redirectUri: String!
}

input IntegrationGoogleUpdateInput {
  code: String!
  redirectUri: String!
}

type IntegrationGrowthSpaces implements Integration
  @shareable
{
  id: ID!
  type: IntegrationType!
  team: Team!
  accessId: String
  accessSecretPart: String
  routes: [IntegrationGrowthSpacesRoute!]
}

input IntegrationGrowthSpacesCreateInput {
  accessId: String!
  accessSecret: String!
  teamId: String!
}

type IntegrationGrowthSpacesRoute
  @shareable
{
  id: String
  name: String
}

input IntegrationGrowthSpacesUpdateInput {
  accessId: String!
  accessSecret: String!
}

enum IntegrationType {
  google
  growthSpaces
}

type Journey
  @key(fields: "id")
  @shareable
{
  id: ID! @shareable

  """private title for creators"""
  title: String!
  description: String
  slug: String! @shareable
  createdAt: DateTime!
  updatedAt: DateTime!
  status: JourneyStatus!
  languageId: String!
  language: Language!
  blocks: [Block!]
  chatButtons: [ChatButton!]!
  archivedAt: DateTime
  deletedAt: DateTime
  publishedAt: DateTime
  trashedAt: DateTime
  featuredAt: DateTime
  themeMode: ThemeMode!
  themeName: ThemeName!

  """title for seo and sharing"""
  seoTitle: String
  seoDescription: String
  template: Boolean
  primaryImageBlock: ImageBlock
  creatorImageBlock: ImageBlock
  logoImageBlock: ImageBlock
  menuStepBlock: StepBlock
  creatorDescription: String
  website: Boolean
  showShareButton: Boolean
  showLikeButton: Boolean
  showDislikeButton: Boolean

  """public title for viewers"""
  displayTitle: String
  showHosts: Boolean
  showChatButtons: Boolean
  showReactionButtons: Boolean
  showLogo: Boolean
  showMenu: Boolean
  showDisplayTitle: Boolean
  showAssistant: Boolean
  menuButtonIcon: JourneyMenuButtonIcon
  socialNodeX: Int
  socialNodeY: Int
  host: Host
  team: Team
  tags: [Tag!]!
  userJourneys: [UserJourney!]
  strategySlug: String

  """used to see if a template has a site created for it"""
  templateSite: Boolean

  """used in a plausible share link to embed report"""
  plausibleToken: String
  fromTemplateId: String
  journeyTheme: JourneyTheme

  """
  Distinct block typenames present on this journey (non-deleted blocks only)
  """
  blockTypenames: [String!]!
  journeyCollections: [JourneyCollection!]!
}

input JourneyAiTranslateInput {
  journeyId: ID!
  name: String!
  journeyLanguageName: String!
  textLanguageId: ID!
  textLanguageName: String!
}

type JourneyAiTranslateProgress {
  """Translation progress as a percentage (0-100)"""
  progress: Float

  """Current translation step message"""
  message: String

  """The journey being translated (only present when complete)"""
  journey: Journey
}

type JourneyCollection
  @shareable
{
  id: ID!
  title: String
  team: Team!
  customDomains: [CustomDomain!]
  journeys: [Journey!]
}

input JourneyCollectionCreateInput {
  id: ID
  teamId: String!
  title: String
  journeyIds: [String!]
}

input JourneyCollectionUpdateInput {
  title: String
  journeyIds: [String!]
}

input JourneyCreateInput {
  """
  ID should be unique Response UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  title: String!
  languageId: String!
  themeMode: ThemeMode
  themeName: ThemeName
  description: String

  """
  Slug should be unique amongst all journeys (server will throw BAD_USER_INPUT error if not). If not required will use title formatted with kebab-case. If the generated slug is not unique the uuid will be placed at the end of the slug guaranteeing uniqueness
  """
  slug: String
}

type JourneyEvent implements Event & Node
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
  action: ButtonAction
  actionValue: String
  messagePlatform: MessagePlatform
  language: Language
  email: String
  blockId: String
  position: Float
  source: VideoBlockSource
  progress: Int
  typename: String
  visitorId: String
  journeySlug: String
  visitorName: String
  visitorEmail: String
  visitorPhone: String
}

type JourneyEventsExportLog {
  id: ID!
  createdAt: DateTimeISO!
  userId: ID!
  journeyId: ID!
  eventsFilter: [String!]!
  dateRangeStart: DateTimeISO
  dateRangeEnd: DateTimeISO
}

input JourneyEventsExportLogInput {
  journeyId: ID!
  eventsFilter: [EventType!]!
  dateRangeStart: DateTimeISO
  dateRangeEnd: DateTimeISO
}

input JourneyEventsFilter {
  typenames: [String!]
  periodRangeStart: DateTime
  periodRangeEnd: DateTime
  includeUnconnectedCards: Boolean
}

enum JourneyMenuButtonIcon {
  menu1
  equals
  home3
  home4
  more
  ellipsis
  grid1
  chevronDown
}

type JourneyNotification
  @shareable
{
  id: ID!
  userId: ID!
  journeyId: ID!
  userTeamId: ID
  userJourneyId: ID
  visitorInteractionEmail: Boolean!
}

input JourneyNotificationUpdateInput {
  journeyId: ID!
  visitorInteractionEmail: Boolean!
}

type JourneyProfile
  @key(fields: "id")
  @shareable
{
  id: ID!
  userId: ID!
  acceptedTermsAt: DateTime
  lastActiveTeamId: String
  journeyFlowBackButtonClicked: Boolean
  plausibleJourneyFlowViewed: Boolean
  plausibleDashboardViewed: Boolean
}

input JourneyProfileUpdateInput {
  lastActiveTeamId: String
  journeyFlowBackButtonClicked: Boolean
  plausibleJourneyFlowViewed: Boolean
  plausibleDashboardViewed: Boolean
}

enum JourneyStatus {
  archived
  deleted
  draft
  published
  trashed
}

input JourneyTemplateInput {
  template: Boolean
}

type JourneyTheme
  @shareable
{
  id: ID!
  journeyId: ID!
  userId: ID!
  headerFont: String
  bodyFont: String
  labelFont: String
  createdAt: DateTime!
  updatedAt: DateTime!
  journey: Journey!
}

input JourneyThemeCreateInput {
  journeyId: ID!
  bodyFont: String
  headerFont: String
  labelFont: String
}

input JourneyThemeUpdateInput {
  bodyFont: String
  headerFont: String
  labelFont: String
}

input JourneyUpdateInput {
  title: String
  languageId: String
  themeMode: ThemeMode
  themeName: ThemeName
  description: String
  creatorDescription: String
  creatorImageBlockId: ID
  primaryImageBlockId: ID
  slug: String
  seoTitle: String
  seoDescription: String
  hostId: String
  strategySlug: String
  tagIds: [ID!]
  website: Boolean
  showShareButton: Boolean
  showLikeButton: Boolean
  showDislikeButton: Boolean
  displayTitle: String
  showHosts: Boolean
  showChatButtons: Boolean
  showReactionButtons: Boolean
  showLogo: Boolean
  showMenu: Boolean
  showDisplayTitle: Boolean
  showAssistant: Boolean
  menuButtonIcon: JourneyMenuButtonIcon
  menuStepBlockId: ID
  logoImageBlockId: ID
  socialNodeX: Int
  socialNodeY: Int
}

type JourneyViewEvent implements Event
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
  language: Language
}

input JourneyViewEventCreateInput {
  id: ID
  journeyId: ID!
  label: String
  value: ID
}

type JourneyVisitor
  @key(fields: "visitorId journeyId")
  @shareable
{
  journeyId: ID!
  visitorId: ID!
  createdAt: DateTime!
  duration: Int
  lastChatStartedAt: DateTime
  lastChatPlatform: MessagePlatform
  lastStepViewedAt: DateTime
  lastLinkAction: String
  lastTextResponse: String
  lastRadioQuestion: String
  lastRadioOptionSubmission: String
  lastMultiselectSubmission: String
  countryCode: String
  messagePlatform: MessagePlatform
  notes: String
  visitor: Visitor!
  events: [Event!]!
}

input JourneyVisitorExportSelect {
  name: Boolean
  email: Boolean
  phone: Boolean
  createdAt: Boolean
}

input JourneyVisitorFilter {
  journeyId: String!
  hasChatStarted: Boolean
  hasPollAnswers: Boolean
  hasMultiselectSubmission: Boolean
  hasTextResponse: Boolean
  hasIcon: Boolean
  hideInactive: Boolean
  countryCode: String
}

input JourneyVisitorGoogleSheetDestinationInput {
  mode: GoogleSheetExportMode!

  """Required when mode is "create". The title for the new spreadsheet."""
  spreadsheetTitle: String

  """
  Optional when mode is "create". The Drive folder ID to create the spreadsheet in. If omitted, it will be created in My Drive.
  """
  folderId: String

  """
  Required when mode is "existing". The ID of the existing spreadsheet to export to.
  """
  spreadsheetId: String

  """
  Required when mode is "existing". The name of the sheet within the existing spreadsheet.
  """
  sheetName: String
}

type JourneyVisitorGoogleSheetExportResult {
  spreadsheetId: ID!
  spreadsheetUrl: String!
  sheetName: String!
}

enum JourneyVisitorSort {
  date
  duration
  activity
}

type JourneysEmailPreference
  @shareable
{
  email: String!
  unsubscribeAll: Boolean!
  accountNotifications: Boolean!
}

input JourneysEmailPreferenceUpdateInput {
  email: String!
  preference: String!
  value: Boolean!
}

input JourneysFilter {
  featured: Boolean
  template: Boolean
  ids: [ID!]
  tagIds: [ID!]
  languageIds: [ID!]
  limit: Int
  orderByRecent: Boolean
  fromTemplateId: ID
  teamId: String
}

input JourneysQueryOptions {
  """
  hostname filters journeys to those that belong to a team with a custom domain matching the hostname.
  """
  hostname: String

  """is this being requested from an embed url"""
  embedded: Boolean

  """
  limit results to journeys in a journey collection (currently only available when using hostname option)
  """
  journeyCollection: Boolean

  """skip custom domain routing filter (for admin template customization)"""
  skipRoutingFilter: Boolean
}

enum JourneysReportType {
  multipleFull
  multipleSummary
  singleFull
  singleSummary
}

"""
The `JSONObject` scalar type represents JSON objects as specified by [ECMA-404](http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-404.pdf).
"""
scalar Json

type Language
  @key(fields: "id")
  @extends
{
  id: ID! @external
}

type LinkAction implements Action
  @shareable
{
  parentBlockId: ID!
  gtmEventName: String
  parentBlock: Block!
  url: String!
  target: String
  customizable: Boolean
  parentStepId: String
}

input LinkActionInput {
  gtmEventName: String
  url: String!
  target: String
  customizable: Boolean
  parentStepId: String
}

union MediaVideo = MuxVideo | Video | YouTube

enum MessagePlatform {
  facebook
  telegram
  whatsApp
  instagram
  kakaoTalk
  viber
  vk
  snapchat
  skype
  line
  tikTok
  custom
  globe2
  globe3
  messageText1
  messageText2
  send1
  send2
  messageChat2
  messageCircle
  messageNotifyCircle
  messageNotifySquare
  messageSquare
  mail1
  linkExternal
  home3
  home4
  helpCircleContained
  helpSquareContained
  shieldCheck
  menu1
  checkBroken
  checkContained
  settings
}

type MultiselectBlock implements Block
  @shareable
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  min: Int
  max: Int
}

input MultiselectBlockCreateInput {
  id: ID
  journeyId: ID!
  parentBlockId: ID!
}

input MultiselectBlockUpdateInput {
  parentBlockId: ID
  min: Int
  max: Int
}

type MultiselectOptionBlock implements Block
  @shareable
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  label: String!
}

input MultiselectOptionBlockCreateInput {
  id: ID
  journeyId: ID!
  parentBlockId: ID!
  label: String!
}

input MultiselectOptionBlockUpdateInput {
  parentBlockId: ID
  label: String
}

type MultiselectSubmissionEvent implements Event
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
}

input MultiselectSubmissionEventCreateInput {
  id: ID
  blockId: ID!
  stepId: ID
  label: String
  values: [String!]!
}

type Mutation {
  multiselectBlockCreate(input: MultiselectBlockCreateInput!): MultiselectBlock!
  multiselectBlockUpdate(
    id: ID!
    input: MultiselectBlockUpdateInput!

    """drop this parameter after merging teams"""
    journeyId: ID
  ): MultiselectBlock!
  multiselectOptionBlockCreate(input: MultiselectOptionBlockCreateInput!): MultiselectOptionBlock!
  multiselectOptionBlockUpdate(
    id: ID!
    input: MultiselectOptionBlockUpdateInput!

    """drop this parameter after merging teams"""
    journeyId: ID
  ): MultiselectOptionBlock!
  videoBlockCreate(input: VideoBlockCreateInput!): VideoBlock!
  videoBlockUpdate(
    id: ID!
    input: VideoBlockUpdateInput!

    """drop this parameter after merging teams"""
    journeyId: ID
  ): VideoBlock!
  blockDeleteAction(id: ID!, journeyId: ID): Block!
  blockUpdateAction(id: ID!, input: BlockUpdateActionInput!): Action!
  blockUpdateEmailAction(id: ID!, input: EmailActionInput!, journeyId: ID): EmailAction!
  blockUpdateLinkAction(id: ID!, input: LinkActionInput!, journeyId: ID): LinkAction!
  blockUpdateNavigateToBlockAction(id: ID!, input: NavigateToBlockActionInput!, journeyId: ID): NavigateToBlockAction!
  blockUpdatePhoneAction(id: ID!, input: PhoneActionInput!, journeyId: ID): PhoneAction!
  blockUpdateChatAction(id: ID!, input: ChatActionInput!, journeyId: ID): ChatAction!
  buttonClickEventCreate(input: ButtonClickEventCreateInput!): ButtonClickEvent!
  chatOpenEventCreate(input: ChatOpenEventCreateInput!): ChatOpenEvent!
  radioQuestionSubmissionEventCreate(input: RadioQuestionSubmissionEventCreateInput!): RadioQuestionSubmissionEvent!
  multiselectSubmissionEventCreate(input: MultiselectSubmissionEventCreateInput!): MultiselectSubmissionEvent!
  signUpSubmissionEventCreate(input: SignUpSubmissionEventCreateInput!): SignUpSubmissionEvent!
  textResponseSubmissionEventCreate(input: TextResponseSubmissionEventCreateInput!): TextResponseSubmissionEvent!
  journeySimpleUpdate(id: ID!, journey: Json!): Json
  googleSheetsSyncCreate(input: CreateGoogleSheetsSyncInput!): GoogleSheetsSync!
  googleSheetsSyncDelete(id: ID!): GoogleSheetsSync!

  """
  Triggers a backfill of the Google Sheets sync. Clears existing data and re-exports all events.
  """
  googleSheetsSyncBackfill(id: ID!): GoogleSheetsSync!
  integrationGoogleCreate(input: IntegrationGoogleCreateInput!): IntegrationGoogle!
  integrationGoogleUpdate(id: ID!, input: IntegrationGoogleUpdateInput!): IntegrationGoogle!
  integrationDelete(id: ID!): Integration!
  journeyAiTranslateCreate(input: JourneyAiTranslateInput!): Journey!
  createJourneyEventsExportLog(input: JourneyEventsExportLogInput!): JourneyEventsExportLog!
  journeyLanguageAiDetect(input: MutationJourneyLanguageAiDetectInput!): Boolean!
  journeyVisitorExportToGoogleSheet(
    journeyId: ID!
    filter: JourneyEventsFilter
    select: JourneyVisitorExportSelect
    destination: JourneyVisitorGoogleSheetDestinationInput!
    integrationId: ID!

    """
    IANA timezone identifier (e.g., "Pacific/Auckland"). Defaults to UTC if not provided.
    """
    timezone: String
  ): JourneyVisitorGoogleSheetExportResult!
}

input MutationJourneyLanguageAiDetectInput {
  journeyId: ID!
  name: String!
  journeyLanguageName: String!
  textLanguageId: ID!
  textLanguageName: String!
}

type MuxVideo
  @key(fields: "id primaryLanguageId")
  @extends
{
  id: ID! @external
  primaryLanguageId: ID @external
  source: VideoBlockSource! @shareable
}

type NavigateToBlockAction implements Action
  @shareable
{
  parentBlockId: ID!
  gtmEventName: String
  parentBlock: Block!
  blockId: String!
}

input NavigateToBlockActionInput {
  gtmEventName: String
  blockId: String!
}

interface Node {
  id: ID!
}

type OperatingSystem
  @shareable
{
  name: String
  version: String
}

type PhoneAction implements Action
  @shareable
{
  parentBlockId: ID!
  gtmEventName: String
  parentBlock: Block!
  phone: String!
  countryCode: String!
  contactAction: ContactActionType!
  customizable: Boolean
  parentStepId: String
}

input PhoneActionInput {
  gtmEventName: String
  phone: String!
  countryCode: String!
  contactAction: ContactActionType = call
  customizable: Boolean
  parentStepId: String
}

enum PlausibleEvent {
  footerThumbsUpButtonClick
  footerThumbsDownButtonClick
  shareButtonClick
  pageview
  navigatePreviousStep
  navigateNextStep
  buttonClick
  chatButtonClick
  footerChatButtonClick
  radioQuestionSubmit
  signUpSubmit
  textResponseSubmit
  videoPlay
  videoPause
  videoExpand
  videoCollapse
  videoStart
  videoProgress25
  videoProgress50
  videoProgress75
  videoComplete
  videoTrigger
  multiSelectSubmit
  prayerRequestCapture
  christDecisionCapture
  gospelStartCapture
  gospelCompleteCapture
  rsvpCapture
  specialVideoStartCapture
  specialVideoCompleteCapture
  custom1Capture
  custom2Capture
  custom3Capture
  chatsClicked
  linksClicked
  journeyVisitors
  journeyResponses
}

input PlausibleStatsAggregateFilter {
  """
  See [time periods](https://plausible.io/docs/stats-api#time-periods).
  If not specified, it will default to 30d.
  """
  period: String

  """
  date in the standard ISO-8601 format (YYYY-MM-DD).
  When using a custom range, the date parameter expects two ISO-8601 formatted dates joined with a comma e.g `2021-01-01,2021-01-31`. Stats will be returned for the whole date range inclusive of the start and end dates.
  """
  date: String

  """
  See [filtering](https://plausible.io/docs/stats-api#filtering) section for more details.
  """
  filters: String

  """
  Off by default. You can specify `previous_period` to calculate the percent difference with the previous period for each metric. The previous period will be of the exact same length as specified in the period parameter.
  """
  interval: String
}

type PlausibleStatsAggregateResponse
  @shareable
{
  """The number of unique visitors."""
  visitors: PlausibleStatsAggregateValue

  """The number of visits/sessions."""
  visits: PlausibleStatsAggregateValue

  """The number of pageview events."""
  pageviews: PlausibleStatsAggregateValue

  """
  The number of pageviews divided by the number of visits. Returns a floating point number. Currently only supported in Aggregate and Timeseries endpoints.
  """
  viewsPerVisit: PlausibleStatsAggregateValue

  """Bounce rate percentage."""
  bounceRate: PlausibleStatsAggregateValue

  """Visit duration in seconds."""
  visitDuration: PlausibleStatsAggregateValue

  """
  The number of events (pageviews + custom events). When filtering by a goal, this metric corresponds to "Total Conversions" in the dashboard.
  """
  events: PlausibleStatsAggregateValue

  """
  The percentage of visitors who completed the goal. Requires an `event:goal` filter or `event:goal` property in the breakdown endpoint.
  """
  conversionRate: PlausibleStatsAggregateValue

  """
  The average time users spend on viewing a single page. Requires an `event:page` filter or `event:page` property in the breakdown endpoint.
  """
  timeOnPage: PlausibleStatsAggregateValue
}

type PlausibleStatsAggregateValue
  @shareable
{
  value: Float!
  change: Int
}

input PlausibleStatsBreakdownFilter {
  """
  Which [property](https://plausible.io/docs/stats-api#properties) to break down the stats by.
  """
  property: String!

  """
  See [time periods](https://plausible.io/docs/stats-api#time-periods).
  If not specified, it will default to 30d.
  """
  period: String

  """
  date in the standard ISO-8601 format (YYYY-MM-DD).
  When using a custom range, the date parameter expects two ISO-8601 formatted dates joined with a comma e.g `2021-01-01,2021-01-31`. Stats will be returned for the whole date range inclusive of the start and end dates.
  """
  date: String

  """
  Limit the number of results. Maximum value is 1000. Defaults to 100.
  If you want to get more than 1000 results, you can make multiple requests and paginate the results by specifying the page parameter (e.g. make the same request with page=1, then page=2, etc).
  """
  limit: Int

  """
  Number of the page, used to paginate results. Importantly, the page numbers start from 1 not 0.
  """
  page: Int

  """
  See [filtering](https://plausible.io/docs/stats-api#filtering) section for more details.
  """
  filters: String
}

type PlausibleStatsResponse
  @shareable
{
  """
  On breakdown queries, this is the property that was broken down by. On aggregate queries, this is the date the stats are for.
  """
  property: String!

  """The number of unique visitors."""
  visitors: Int

  """The number of visits/sessions."""
  visits: Int

  """The number of pageview events."""
  pageviews: Int

  """
  The number of pageviews divided by the number of visits. Returns a floating point number. Currently only supported in Aggregate and Timeseries endpoints.
  """
  viewsPerVisit: Float

  """Bounce rate percentage."""
  bounceRate: Int

  """Visit duration in seconds."""
  visitDuration: Int

  """
  The number of events (pageviews + custom events). When filtering by a goal, this metric corresponds to "Total Conversions" in the dashboard.
  """
  events: Int

  """
  The percentage of visitors who completed the goal. Requires an `event:goal` filter or `event:goal` property in the breakdown endpoint.
  """
  conversionRate: Int

  """
  The average time users spend on viewing a single page. Requires an `event:page` filter or `event:page` property in the breakdown endpoint.
  """
  timeOnPage: Float
}

input PlausibleStatsTimeseriesFilter {
  """
  See [time periods](https://plausible.io/docs/stats-api#time-periods).
  If not specified, it will default to 30d.
  """
  period: String

  """
  date in the standard ISO-8601 format (YYYY-MM-DD).
  When using a custom range, the date parameter expects two ISO-8601 formatted dates joined with a comma e.g `2021-01-01,2021-01-31`. Stats will be returned for the whole date range inclusive of the start and end dates.
  """
  date: String

  """
  See [filtering](https://plausible.io/docs/stats-api#filtering) section for more details.
  """
  filters: String

  """
  Choose your reporting interval. Valid options are date (always) and month (when specified period is longer than one calendar month). Defaults to month for 6mo and 12mo, otherwise falls back to date.
  """
  interval: String
}

type QrCode
  @shareable
{
  id: ID!
  toJourneyId: String
  color: String
  backgroundColor: String
  team: Team
  journey: Journey
  shortLink: ShortLink!
}

input QrCodeCreateInput {
  teamId: ID!
  journeyId: ID!
}

input QrCodeUpdateInput {
  """
  journey url where the QR code redirects to, will be parsed and stored as ids
  """
  to: String
  color: String
  backgroundColor: String
}

input QrCodesFilter {
  journeyId: ID
  teamId: ID
}

type Query {
  node(id: ID!): Node
  nodes(ids: [ID!]!): [Node]!
  journeySimpleGet(id: ID!): Json
  googleSheetsSyncs(filter: GoogleSheetsSyncsFilter!): [GoogleSheetsSync!]!
  integrationGooglePickerToken(integrationId: ID!): String!

  """
  Returns a CSV formatted string with journey visitor export data including headers and visitor data with event information
  """
  journeyVisitorExport(
    journeyId: ID!
    filter: JourneyEventsFilter
    select: JourneyVisitorExportSelect

    """
    IANA timezone identifier (e.g., "Pacific/Auckland"). Defaults to UTC if not provided.
    """
    timezone: String
  ): String
  journeysPlausibleStatsAggregate(where: PlausibleStatsAggregateFilter!, id: ID!, idType: IdType = slug): PlausibleStatsAggregateResponse!

  """
  This endpoint allows you to break down your stats by some property.
  If you are familiar with SQL family databases, this endpoint corresponds to
  running `GROUP BY` on a certain property in your stats, then ordering by the
  count.
  Check out the [properties](https://plausible.io/docs/stats-api#properties)
  section for a reference of all the properties you can use in this query.
  This endpoint can be used to fetch data for `Top sources`, `Top pages`,
  `Top countries` and similar reports.
  Currently, it is only possible to break down on one property at a time.
  Using a list of properties with one query is not supported. So if you want
  a breakdown by both `event:page` and `visit:source` for example, you would
  have to make multiple queries (break down on one property and filter on
   another) and then manually/programmatically group the results together in one
   report. This also applies for breaking down by time periods. To get a daily
   breakdown for every page, you would have to break down on `event:page` and
   make multiple queries for each date.
  """
  journeysPlausibleStatsBreakdown(where: PlausibleStatsBreakdownFilter!, id: ID!, idType: IdType = slug): [PlausibleStatsResponse!]!
  journeysPlausibleStatsRealtimeVisitors(id: ID!, idType: IdType = slug): Int!

  """
  This endpoint provides timeseries data over a certain time period.
  If you are familiar with the Plausible dashboard, this endpoint corresponds to the main visitor graph.
  """
  journeysPlausibleStatsTimeseries(where: PlausibleStatsTimeseriesFilter!, id: ID!, idType: IdType = slug): [PlausibleStatsResponse!]!
  templateFamilyStatsAggregate(id: ID!, idType: IdType = slug, where: PlausibleStatsAggregateFilter!): TemplateFamilyStatsAggregateResponse
  templateFamilyStatsBreakdown(
    id: ID!
    idType: IdType = slug
    where: PlausibleStatsBreakdownFilter!

    """
    Filter results to only include the specified events. If null or empty, all events are returned.
    """
    events: [PlausibleEvent!]

    """
    Filter results to only include the specified status. If null or empty, all statuses are returned.
    """
    status: [JourneyStatus!]
  ): [TemplateFamilyStatsBreakdownResponse!]
}

type RadioOptionBlock implements Block
  @shareable
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  eventLabel: BlockEventLabel
  label: String!

  """
  pollOptionImageBlockId is present if a child block should be used as a poll option image.
        This child block should not be rendered normally, instead it should be used
        as a poll option image. Blocks are often of type ImageBlock
  """
  pollOptionImageBlockId: ID
  action: Action
}

input RadioOptionBlockCreateInput {
  id: ID
  journeyId: ID!
  parentBlockId: ID!
  eventLabel: BlockEventLabel
  label: String!
}

input RadioOptionBlockUpdateInput {
  parentBlockId: ID
  eventLabel: BlockEventLabel
  label: String
  pollOptionImageBlockId: ID
}

type RadioQuestionBlock implements Block
  @shareable
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  gridView: Boolean
}

input RadioQuestionBlockCreateInput {
  id: ID
  journeyId: ID!
  parentBlockId: ID!
}

type RadioQuestionSubmissionEvent implements Event
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
}

input RadioQuestionSubmissionEventCreateInput {
  id: ID
  blockId: ID!
  radioOptionBlockId: ID!
  stepId: ID
  label: String
  value: String
}

enum Role {
  publisher
}

type ShortLink
  @key(fields: "id")
  @extends
{
  id: ID!
}

type SignUpBlock implements Block
  @shareable
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  submitIconId: ID
  submitLabel: String
  action: Action
}

input SignUpBlockCreateInput {
  id: ID
  journeyId: ID!
  parentBlockId: ID!
  submitLabel: String!
}

input SignUpBlockUpdateInput {
  parentBlockId: ID
  submitIconId: ID
  submitLabel: String
}

type SignUpSubmissionEvent implements Event
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
  email: String
}

input SignUpSubmissionEventCreateInput {
  id: ID
  blockId: ID!
  stepId: ID
  name: String!
  email: String!
}

type SpacerBlock implements Block
  @shareable
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  spacing: Int
}

input SpacerBlockCreateInput {
  id: ID
  journeyId: ID!
  parentBlockId: ID!
  spacing: Int
}

input SpacerBlockUpdateInput {
  parentBlockId: ID
  spacing: Int
}

type StepBlock implements Block
  @shareable
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int

  """
  locked will be set to true if the user should not be able to manually
  advance to the next step.
  """
  locked: Boolean!

  """
  nextBlockId contains the preferred block to navigate to, users will have to
  manually set the next block they want to card to navigate to
  """
  nextBlockId: ID

  """
  x is used to position the block horizontally in the journey flow diagram on
  the editor.
  """
  x: Int

  """
  y is used to position the block vertically in the journey flow diagram on
  the editor.
  """
  y: Int

  """
  Slug should be unique amongst all blocks
  (server will throw BAD_USER_INPUT error if not)
  If not required will use the current block id
  If the generated slug is not unique the uuid will be placed
  at the end of the slug guaranteeing uniqueness
  """
  slug: String
}

input StepBlockCreateInput {
  id: ID
  journeyId: ID!
  nextBlockId: ID
  locked: Boolean

  """
  x is used to position the block horizontally in the journey flow diagram on the editor.
  """
  x: Int

  """
  y is used to position the block vertically in the journey flow diagram on the editor.
  """
  y: Int
}

input StepBlockPositionUpdateInput {
  id: ID!
  x: Int
  y: Int
}

input StepBlockUpdateInput {
  nextBlockId: ID
  locked: Boolean

  """
  x is used to position the block horizontally in the journey flow diagram on the editor.
  """
  x: Int

  """
  y is used to position the block vertically in the journey flow diagram on the editor.
  """
  y: Int

  """
  Slug should be unique amongst all blocks (server will throw BAD_USER_INPUT error if not). If not required will use the current block id. If the generated slug is not unique the uuid will be placed at the end of the slug guaranteeing uniqueness
  """
  slug: String
}

type StepNextEvent implements Event
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
}

input StepNextEventCreateInput {
  id: ID
  blockId: ID!
  nextStepId: ID!
  label: String
  value: String
}

type StepPreviousEvent implements Event
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
}

input StepPreviousEventCreateInput {
  id: ID
  blockId: ID!
  previousStepId: ID!
  label: String
  value: String
}

type StepViewEvent implements Event
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
}

input StepViewEventCreateInput {
  id: ID
  blockId: ID!
  value: String
}

type Subscription {
  journeyAiTranslateCreateSubscription(input: JourneyAiTranslateInput!): JourneyAiTranslateProgress!
}

type Tag
  @key(fields: "id")
  @extends
{
  id: ID! @external
}

type Team
  @shareable
{
  id: ID!
  title: String!
  publicTitle: String
  createdAt: DateTime!
  updatedAt: DateTime!
  userTeams: [UserTeam!]!
  customDomains: [CustomDomain!]!
  integrations: [Integration!]!
  qrCodes: [QrCode!]!
}

input TeamCreateInput {
  title: String!
  publicTitle: String
}

input TeamUpdateInput {
  title: String!
  publicTitle: String
}

type TemplateFamilyStatsAggregateResponse
  @shareable
{
  childJourneysCount: Int!
  totalJourneysViews: Int!
  totalJourneysResponses: Int!
}

type TemplateFamilyStatsBreakdownResponse
  @shareable
{
  journeyId: String!
  journeyName: String!
  teamName: String!
  status: JourneyStatus
  stats: [TemplateFamilyStatsEventResponse!]!
}

type TemplateFamilyStatsEventResponse
  @shareable
{
  event: String!
  visitors: Int!
}

type TextResponseBlock implements Block
  @shareable
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  label: String!
  placeholder: String
  required: Boolean
  hint: String
  hideLabel: Boolean
  minRows: Int
  type: TextResponseType
  routeId: String
  integrationId: String
}

input TextResponseBlockCreateInput {
  id: ID
  journeyId: ID!
  parentBlockId: ID!
  label: String!
}

input TextResponseBlockUpdateInput {
  parentBlockId: ID
  label: String
  placeholder: String
  required: Boolean
  hint: String
  hideLabel: Boolean
  minRows: Int
  routeId: String
  type: TextResponseType
  integrationId: String
}

type TextResponseSubmissionEvent implements Event
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
  blockId: String
}

input TextResponseSubmissionEventCreateInput {
  id: ID
  blockId: ID!
  stepId: ID
  label: String
  value: String!
}

enum TextResponseType {
  freeForm
  name
  email
  phone
}

enum ThemeMode {
  dark
  light
}

enum ThemeName {
  base
}

enum TypographyAlign {
  left
  center
  right
}

type TypographyBlock implements Block
  @shareable
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  content: String!
  variant: TypographyVariant
  color: TypographyColor
  align: TypographyAlign
  settings: TypographyBlockSettings
}

input TypographyBlockCreateInput {
  id: ID
  journeyId: ID!
  parentBlockId: ID!
  content: String!
  variant: TypographyVariant
  color: TypographyColor
  align: TypographyAlign
  settings: TypographyBlockSettingsInput
}

type TypographyBlockSettings
  @shareable
{
  """Color of the typography"""
  color: String
}

input TypographyBlockSettingsInput {
  color: String
}

input TypographyBlockUpdateInput {
  parentBlockId: ID
  content: String
  variant: TypographyVariant
  color: TypographyColor
  align: TypographyAlign
  settings: TypographyBlockSettingsInput
}

enum TypographyColor {
  primary
  secondary
  error
}

enum TypographyVariant {
  h1
  h2
  h3
  h4
  h5
  h6
  subtitle1
  subtitle2
  body1
  body2
  caption
  overline
}

union User = AuthenticatedUser

type UserAgent
  @shareable
{
  browser: Browser!
  device: Device!
  os: OperatingSystem!
}

type UserInvite
  @key(fields: "id")
  @shareable
{
  id: ID!
  journeyId: ID!
  senderId: ID!
  email: String!
  acceptedAt: DateTime
  removedAt: DateTime
}

input UserInviteCreateInput {
  email: String!
}

type UserJourney
  @shareable
{
  id: ID!
  userId: ID!
  journeyId: ID!
  role: UserJourneyRole!
  openedAt: DateTime
  journey: Journey
  user: AuthenticatedUser
  journeyNotification: JourneyNotification
}

enum UserJourneyRole {
  inviteRequested
  editor
  owner
}

type UserRole
  @key(fields: "id")
  @shareable
{
  id: ID!
  userId: ID!
  roles: [Role!]
}

type UserTeam
  @shareable
{
  id: ID!
  role: UserTeamRole!
  createdAt: DateTime!
  updatedAt: DateTime!
  user: AuthenticatedUser!
  journeyNotification(journeyId: ID!): JourneyNotification
}

input UserTeamFilterInput {
  role: [UserTeamRole!]
}

type UserTeamInvite
  @shareable
{
  id: ID!
  teamId: ID!
  email: String!
}

input UserTeamInviteCreateInput {
  email: String!
}

enum UserTeamRole {
  manager
  member
}

input UserTeamUpdateInput {
  role: UserTeamRole!
}

type Video
  @key(fields: "id primaryLanguageId")
  @extends
{
  id: ID! @external
  primaryLanguageId: ID! @external
  source: VideoBlockSource! @shareable
}

type VideoBlock implements Block
  @key(fields: "id")
  @shareable
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  eventLabel: BlockEventLabel
  endEventLabel: BlockEventLabel
  autoplay: Boolean
  startAt: Int
  endAt: Int
  muted: Boolean
  videoId: ID
  videoVariantLanguageId: ID

  """
  internal source: videoId, videoVariantLanguageId, and video present
  youTube source: videoId, title, description, and duration present
  """
  source: VideoBlockSource!
  title: String
  description: String
  image: String
  duration: Int
  objectFit: VideoBlockObjectFit
  posterBlockId: ID
  fullsize: Boolean
  subtitleLanguage: Language
  action: Action
  showGeneratedSubtitles: Boolean
  mediaVideo: MediaVideo
}

input VideoBlockCreateInput {
  id: ID
  journeyId: ID!
  parentBlockId: ID!
  eventLabel: BlockEventLabel
  endEventLabel: BlockEventLabel
  videoId: ID
  videoVariantLanguageId: ID
  source: VideoBlockSource

  """
  True if the coverBlockId in a parent block should be set to this block's id.
  """
  isCover: Boolean
  title: String
  description: String
  image: String
  duration: Int
  objectFit: VideoBlockObjectFit
  startAt: Int
  endAt: Int
  muted: Boolean
  autoplay: Boolean
  fullsize: Boolean
  posterBlockId: ID
  subtitleLanguageId: ID
  showGeneratedSubtitles: Boolean
}

enum VideoBlockObjectFit {
  fill
  fit
  zoomed
}

enum VideoBlockSource {
  cloudflare
  internal
  youTube
  mux
}

input VideoBlockUpdateInput {
  parentBlockId: ID
  eventLabel: BlockEventLabel
  endEventLabel: BlockEventLabel
  videoId: ID
  videoVariantLanguageId: ID
  posterBlockId: ID
  title: String
  description: String
  image: String
  duration: Int
  objectFit: VideoBlockObjectFit
  startAt: Int
  endAt: Int
  muted: Boolean
  autoplay: Boolean
  fullsize: Boolean
  subtitleLanguageId: ID

  """
  internal source: videoId and videoVariantLanguageId required
    youTube source: videoId required
  """
  source: VideoBlockSource
  showGeneratedSubtitles: Boolean
}

type VideoCollapseEvent implements Event
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
  position: Float
  source: VideoBlockSource
}

input VideoCollapseEventCreateInput {
  id: ID
  blockId: ID!
  stepId: ID
  position: Float
  label: String
  value: VideoBlockSource
}

type VideoCompleteEvent implements Event
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
  position: Float
  source: VideoBlockSource
}

input VideoCompleteEventCreateInput {
  id: ID
  blockId: ID!
  stepId: ID
  position: Float
  label: String
  value: VideoBlockSource
}

type VideoExpandEvent implements Event
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
  position: Float
  source: VideoBlockSource
}

input VideoExpandEventCreateInput {
  id: ID
  blockId: ID!
  stepId: ID
  position: Float
  label: String
  value: VideoBlockSource
}

type VideoPauseEvent implements Event
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
  position: Float
  source: VideoBlockSource
}

input VideoPauseEventCreateInput {
  id: ID
  blockId: ID!
  stepId: ID
  position: Float
  label: String
  value: VideoBlockSource
}

type VideoPlayEvent implements Event
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
  position: Float
  source: VideoBlockSource
}

input VideoPlayEventCreateInput {
  id: ID
  blockId: ID!
  stepId: ID
  position: Float
  label: String
  value: VideoBlockSource
}

type VideoProgressEvent implements Event
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
  position: Float
  source: VideoBlockSource
  progress: Int!
}

input VideoProgressEventCreateInput {
  id: ID
  blockId: ID!
  stepId: ID
  position: Float
  label: String
  value: VideoBlockSource
  progress: Int!
}

type VideoStartEvent implements Event
  @shareable
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
  position: Float
  source: VideoBlockSource
}

input VideoStartEventCreateInput {
  id: ID
  blockId: ID!
  stepId: ID
  position: Float
  label: String
  value: VideoBlockSource
}

type VideoTriggerBlock implements Block
  @shareable
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int

  """
  triggerStart sets the time as to when a video navigates to the next block,
  this is the number of seconds since the start of the video
  """
  triggerStart: Int!
  action: Action!
}

type Visitor
  @key(fields: "id")
  @shareable
{
  id: ID!
  createdAt: DateTime!
  duration: Int
  lastChatStartedAt: DateTime
  lastChatPlatform: MessagePlatform
  userAgent: UserAgent
  countryCode: String
  name: String
  email: String
  status: VisitorStatus
  messagePlatform: MessagePlatform
  messagePlatformId: String
  notes: String
  lastStepViewedAt: DateTime
  lastLinkAction: String
  lastTextResponse: String
  lastRadioQuestion: String
  lastRadioOptionSubmission: String
  referrer: String
  events: [Event!]!
}

enum VisitorStatus {
  star
  prohibited
  checkMarkSymbol
  thumbsUp
  thumbsDown
  partyPopper
  warning
  robotFace
  redExclamationMark
  redQuestionMark
}

input VisitorUpdateInput {
  email: String
  name: String
  messagePlatform: MessagePlatform
  messagePlatformId: String
  notes: String
  status: VisitorStatus
  countryCode: String
  referrer: String
  phone: String
}

type YouTube
  @key(fields: "id primaryLanguageId")
  @extends
{
  id: ID! @external
  primaryLanguageId: ID @external
  source: VideoBlockSource! @shareable
}