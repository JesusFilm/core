extend schema
  @link(url: "https://specs.apollo.dev/federation/v2.6", import: ["@shareable"])

interface BaseError {
  message: String
}

type Error implements BaseError
  @shareable
{
  message: String
}

type Mutation {
  siteCreate(input: SiteCreateInput!): MutationSiteCreateResult!
  sitesAddGoals(input: SitesAddGoalsInput!): MutationSitesAddGoalsResult!
}

union MutationSiteCreateResult = Error | MutationSiteCreateSuccess

type MutationSiteCreateSuccess {
  data: Site!
}

union MutationSitesAddGoalsResult = Error | MutationSitesAddGoalsSuccess

type MutationSitesAddGoalsSuccess {
  data: Int!
}

type Site {
  id: String!
  domain: String!
  memberships: [SiteMembership!]!
  sharedLinks: [SiteSharedLink!]!
  goals: [SiteGoal!]!
}

input SiteCreateInput {
  domain: String!
  goals: [String!]
  disableSharedLinks: Boolean
}

type SiteGoal {
  id: String!
  eventName: String
}

type SiteMembership {
  id: String!
  role: String!
}

type SiteSharedLink {
  id: String!
  slug: String!
}

input SitesAddGoalsInput {
  goals: [String!]!
}