---
title: 3. Microservice Databases
---

# Setup Microservice Databases

<div
  style={{
    position: 'relative',
    paddingBottom: '64.63195691202873%',
    marginBottom: '20px',
    height: 0
  }}
>
  <iframe
    src="https://www.loom.com/embed/887d917e881a4c14a9abd12e052faf0a"
    frameborder="0"
    allowFullScreen="true"
    webkitallowfullscreen="true"
    mozallowfullscreen="true"
    style={{
      position: 'absolute',
      top: 0,
      left: 0,
      width: '100%',
      height: '100%'
    }}
  />
</div>

Microservices typically make use of a variety of database stores. The following command will create the required databases, migrate them to the latest state, and fill them with relevant data.

```shell
nx run-many --all --target=prisma-generate --parallel=1
```

```shell
nx run-many --all --target=prisma-migrate
```

```shell
nx run-many --all --target=prisma-seed
```

## Common Issues

### prisma-generate failing

If prisma-generate is failing on Mac, run the following reset command on api-journeys:

```shell
nx run prisma-reset api-journeys
```

```shell
Command failed: "/workspaces/core/node_modules/-bin/mmdc" -i "/tmp/prisma-erd-q0 cpUx/prisma.mmd" -0 "/workspaces/core/apps/api-journeys/db/ERD.svg" -c"/tmp/pri
sma-erd-qOcpUx/config-json" -p"/tmp/prisma-erd-qOcpUx/puppeteerConfig-json"
```

If you get see the above error, it means chromium is unable to allocate a namespace. Docker must be updated so that it can access these permissions from the Mac OS. Please update docker to at least version 4.28.0
