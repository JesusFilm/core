generator client {
    provider = "prisma-client-js"
    output   = env("PRISMA_LOCATION")
}

datasource db {
    provider = "postgresql"
    url      = env("PG_DATABASE_URL")
}

model Nexus {
    id          String      @id @default(uuid())
    name        String
    description String?
    createdAt   DateTime    @default(now())
    deletedAt   DateTime?
    status      NexusStatus
    userNexuses UserNexus[]
    channels    Channel[]
    resources   Resource[]
}

enum NexusStatus {
    deleted
    published
}

model UserNexus {
    id      String @id @default(uuid())
    userId  String
    nexusId String
    nexus   Nexus  @relation(fields: [nexusId], references: [id])
    role    String
}

model Channel {
    id       String @id @default(uuid())
    nexusId  String
    name     String
    platform String
    nexus    Nexus  @relation(fields: [nexusId], references: [id])
}

model Resource {
    id      String @id @default(uuid())
    nexusId String
    name    String
    refLink String
    vidoId  String
    nexus   Nexus  @relation(fields: [nexusId], references: [id])
}
