schema
  @link(url: "https://specs.apollo.dev/link/v1.0")
  @link(url: "https://specs.apollo.dev/join/v0.2", for: EXECUTION)
{
  query: Query
  mutation: Mutation
}

directive @join__field(graph: join__Graph!, requires: join__FieldSet, provides: join__FieldSet, type: String, external: Boolean, override: String, usedOverridden: Boolean) repeatable on FIELD_DEFINITION | INPUT_FIELD_DEFINITION

directive @join__graph(name: String!, url: String!) on ENUM_VALUE

directive @join__implements(graph: join__Graph!, interface: String!) repeatable on OBJECT | INTERFACE

directive @join__type(graph: join__Graph!, key: join__FieldSet, extension: Boolean! = false, resolvable: Boolean! = true) repeatable on OBJECT | INTERFACE | UNION | ENUM | INPUT_OBJECT | SCALAR

directive @link(url: String, as: String, for: link__Purpose, import: [link__Import]) repeatable on SCHEMA

interface Action
  @join__type(graph: JOURNEYS)
{
  parentBlockId: ID!
  gtmEventName: String
}

interface Block
  @join__type(graph: JOURNEYS)
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
}

type Browser
  @join__type(graph: JOURNEYS)
{
  name: String
  version: String
}

type ButtonBlock implements Block
  @join__implements(graph: JOURNEYS, interface: "Block")
  @join__type(graph: JOURNEYS)
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  label: String!
  variant: ButtonVariant
  color: ButtonColor
  size: ButtonSize
  startIconId: ID
  endIconId: ID
  action: Action
}

input ButtonBlockCreateInput
  @join__type(graph: JOURNEYS)
{
  id: ID
  journeyId: ID!
  parentBlockId: ID!
  label: String!
  variant: ButtonVariant
  color: ButtonColor
  size: ButtonSize
}

input ButtonBlockUpdateInput
  @join__type(graph: JOURNEYS)
{
  parentBlockId: ID
  label: String
  variant: ButtonVariant
  color: ButtonColor
  size: ButtonSize
  startIconId: ID
  endIconId: ID
}

type ButtonClickEvent implements Event
  @join__implements(graph: JOURNEYS, interface: "Event")
  @join__type(graph: JOURNEYS)
{
  id: ID!

  """ID of the journey that the buttonBlock belongs to"""
  journeyId: ID!

  """time event was created"""
  createdAt: DateTime!

  """stepName of the parent stepBlock"""
  label: String

  """label of the button"""
  value: String
}

input ButtonClickEventCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Event UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  blockId: ID!

  """id of the parent stepBlock"""
  stepId: ID

  """stepName of the parent stepBlock"""
  label: String

  """label of the button"""
  value: String
}

enum ButtonColor
  @join__type(graph: JOURNEYS)
{
  primary
  secondary
  error
  inherit
}

enum ButtonSize
  @join__type(graph: JOURNEYS)
{
  small
  medium
  large
}

enum ButtonVariant
  @join__type(graph: JOURNEYS)
{
  text
  contained
}

type CardBlock implements Block
  @join__implements(graph: JOURNEYS, interface: "Block")
  @join__type(graph: JOURNEYS)
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int

  """backgroundColor should be a HEX color value e.g #FFFFFF for white."""
  backgroundColor: String

  """
  coverBlockId is present if a child block should be used as a cover.
  This child block should not be rendered normally, instead it should be used
  as a background. Blocks are often of type ImageBlock or VideoBlock.
  """
  coverBlockId: ID

  """
  fullscreen should control how the coverBlock is displayed. When fullscreen
  is set to true the coverBlock Image should be displayed as a blur in the
  background.
  """
  fullscreen: Boolean!

  """
  themeMode can override journey themeMode. If nothing is set then use
  themeMode from journey
  """
  themeMode: ThemeMode

  """
  themeName can override journey themeName. If nothing is set then use
  themeName from journey
  """
  themeName: ThemeName
}

input CardBlockCreateInput
  @join__type(graph: JOURNEYS)
{
  id: ID
  journeyId: ID!
  parentBlockId: ID!
  backgroundColor: String
  fullscreen: Boolean
  themeMode: ThemeMode
  themeName: ThemeName
}

input CardBlockUpdateInput
  @join__type(graph: JOURNEYS)
{
  parentBlockId: ID
  backgroundColor: String
  fullscreen: Boolean
  themeMode: ThemeMode
  themeName: ThemeName
}

type ChatOpenEvent implements Event
  @join__implements(graph: JOURNEYS, interface: "Event")
  @join__type(graph: JOURNEYS)
{
  id: ID!

  """ID of the journey that the buttonBlock belongs to"""
  journeyId: ID!

  """time event was created"""
  createdAt: DateTime!

  """null for ChatOpenEvent"""
  label: String

  """messagePlatform of the link used for chat"""
  value: String

  """
  messagePlatform of the link used for chat (based on the messagePlatform in the value field)
  """
  messagePlatform: MessagePlatform
}

input ChatOpenEventCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Event UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  blockId: ID!

  """id of the parent stepBlock"""
  stepId: ID

  """messagePlatform of the link used for chat"""
  value: MessagePlatform
}

type CloudflareImage
  @join__type(graph: MEDIA)
{
  id: ID!
  uploadUrl: String!
  userId: ID!
  createdAt: String!
}

type Country
  @join__type(graph: LANGUAGES, key: "id")
{
  id: ID!
  name(languageId: ID, primary: Boolean): [Translation!]!
  population: Int!
  continent(languageId: ID, primary: Boolean): [Translation!]!

  """
  slug is a permanent link to the country. It should only be appended, not edited or deleted
  """
  slug(languageId: ID, primary: Boolean): [Translation!]!
  languages: [Language!]!
  latitude: Float!
  longitude: Float!
  image: String
}

scalar DateTime
  @join__type(graph: JOURNEYS)

type Device
  @join__type(graph: JOURNEYS)
{
  model: String
  type: DeviceType
  vendor: String
}

enum DeviceType
  @join__type(graph: JOURNEYS)
{
  console
  mobile
  tablet
  smarttv
  wearable
  embedded
}

interface Event
  @join__type(graph: JOURNEYS)
{
  id: ID!
  journeyId: ID!
  createdAt: DateTime!
  label: String
  value: String
}

enum GridAlignItems
  @join__type(graph: JOURNEYS)
{
  baseline
  flexStart
  flexEnd
  center
}

type GridContainerBlock implements Block
  @join__implements(graph: JOURNEYS, interface: "Block")
  @join__type(graph: JOURNEYS)
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  spacing: Int!
  direction: GridDirection!
  justifyContent: GridJustifyContent!
  alignItems: GridAlignItems!
}

enum GridDirection
  @join__type(graph: JOURNEYS)
{
  columnReverse
  column
  row
  rowReverse
}

type GridItemBlock implements Block
  @join__implements(graph: JOURNEYS, interface: "Block")
  @join__type(graph: JOURNEYS)
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  xl: Int!
  lg: Int!
  sm: Int!
}

enum GridJustifyContent
  @join__type(graph: JOURNEYS)
{
  flexStart
  flexEnd
  center
}

type IconBlock implements Block
  @join__implements(graph: JOURNEYS, interface: "Block")
  @join__type(graph: JOURNEYS)
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  name: IconName
  color: IconColor
  size: IconSize
}

input IconBlockCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Response UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  parentBlockId: ID!
  journeyId: ID!
  name: IconName
  color: IconColor
  size: IconSize
}

input IconBlockUpdateInput
  @join__type(graph: JOURNEYS)
{
  name: IconName
  color: IconColor
  size: IconSize
}

enum IconColor
  @join__type(graph: JOURNEYS)
{
  primary
  secondary
  action
  error
  disabled
  inherit
}

"""IconName is equivalent to the icons found in @mui/icons-material"""
enum IconName
  @join__type(graph: JOURNEYS)
{
  PlayArrowRounded
  TranslateRounded
  CheckCircleRounded
  RadioButtonUncheckedRounded
  FormatQuoteRounded
  LockOpenRounded
  ArrowForwardRounded
  ArrowBackRounded
  ChatBubbleOutlineRounded
  LiveTvRounded
  MenuBookRounded
  ChevronRightRounded
  ChevronLeftRounded
  BeenhereRounded
  SendRounded
  SubscriptionsRounded
  ContactSupportRounded
}

enum IconSize
  @join__type(graph: JOURNEYS)
{
  sm
  md
  lg
  xl
  inherit
}

enum IdType
  @join__type(graph: JOURNEYS)
  @join__type(graph: LANGUAGES)
  @join__type(graph: VIDEOS)
{
  databaseId
  slug
}

type ImageBlock implements Block
  @join__implements(graph: JOURNEYS, interface: "Block")
  @join__type(graph: JOURNEYS)
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  src: String
  width: Int!
  height: Int!
  alt: String!

  """
  blurhash is a compact representation of a placeholder for an image.
  Find a frontend implementation at https://github.com/woltapp/blurhash
  """
  blurhash: String!
}

input ImageBlockCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Response UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  parentBlockId: ID!
  journeyId: ID!
  src: String
  alt: String!
  blurhash: String

  """
  True if the coverBlockId in a parent block should be set to this block's id.
  """
  isCover: Boolean
}

input ImageBlockUpdateInput
  @join__type(graph: JOURNEYS)
{
  parentBlockId: ID
  src: String
  alt: String
}

scalar join__FieldSet

enum join__Graph {
  JOURNEYS @join__graph(name: "journeys", url: "http://127.0.0.1:4001/graphql")
  LANGUAGES @join__graph(name: "languages", url: "http://127.0.0.1:4003/graphql")
  MEDIA @join__graph(name: "media", url: "http://127.0.0.1:4005/graphql")
  USERS @join__graph(name: "users", url: "http://127.0.0.1:4002/graphql")
  VIDEOS @join__graph(name: "videos", url: "http://127.0.0.1:4004/graphql")
}

type Journey
  @join__type(graph: JOURNEYS, key: "id")
{
  blocks: [Block!]
  primaryImageBlock: ImageBlock
  id: ID!
  title: String!
  language: Language!
  themeMode: ThemeMode!
  themeName: ThemeName!
  description: String
  slug: String!
  archivedAt: DateTime
  deletedAt: DateTime
  publishedAt: DateTime
  trashedAt: DateTime
  featuredAt: DateTime
  createdAt: DateTime!
  status: JourneyStatus!
  seoTitle: String
  seoDescription: String
  template: Boolean
  userJourneys: [UserJourney!]
}

input JourneyCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Response UUID
  (Provided for optimistic mutation result matching)
  """
  id: ID
  title: String!
  languageId: String!
  themeMode: ThemeMode
  themeName: ThemeName
  description: String

  """
  Slug should be unique amongst all journeys
  (server will throw BAD_USER_INPUT error if not)
  If not required will use title formatted with kebab-case
  If the generated slug is not unique the uuid will be placed
  at the end of the slug guaranteeing uniqueness
  """
  slug: String
}

input JourneysFilter
  @join__type(graph: JOURNEYS)
{
  featured: Boolean
  template: Boolean
}

enum JourneysReportType
  @join__type(graph: JOURNEYS)
{
  multipleFull
  multipleSummary
  singleFull
  singleSummary
}

enum JourneyStatus
  @join__type(graph: JOURNEYS)
{
  archived
  deleted
  draft
  published
  trashed
}

input JourneyTemplateInput
  @join__type(graph: JOURNEYS)
{
  template: Boolean
}

input JourneyUpdateInput
  @join__type(graph: JOURNEYS)
{
  title: String
  languageId: String
  themeMode: ThemeMode
  themeName: ThemeName
  description: String
  primaryImageBlockId: ID
  slug: String
  seoTitle: String
  seoDescription: String
}

type JourneyViewEvent implements Event
  @join__implements(graph: JOURNEYS, interface: "Event")
  @join__type(graph: JOURNEYS)
{
  id: ID!

  """ID of the journey being viewed"""
  journeyId: ID!

  """time event was created"""
  createdAt: DateTime!

  """title of the journey being viewed"""
  label: String

  """languageId of the journey being viewed"""
  value: String

  """
  language of the journey being viewed (based on the ID in the value field)
  """
  language: Language
}

input JourneyViewEventCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Event UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  journeyId: ID!

  """title of the journey being viewed"""
  label: String

  """languageId of the journey being viewed"""
  value: ID
}

type Language
  @join__type(graph: JOURNEYS, key: "id")
  @join__type(graph: LANGUAGES, key: "id")
  @join__type(graph: VIDEOS, key: "id")
{
  id: ID!
  bcp47: String @join__field(graph: LANGUAGES)
  iso3: String @join__field(graph: LANGUAGES)
  name(languageId: ID, primary: Boolean): [Translation!]! @join__field(graph: LANGUAGES)
}

enum LanguageIdType
  @join__type(graph: LANGUAGES)
{
  databaseId
  bcp47
}

type LanguageWithSlug
  @join__type(graph: VIDEOS)
{
  language: Language
  slug: String
}

scalar link__Import

enum link__Purpose {
  """
  `SECURITY` features provide metadata necessary to securely resolve fields.
  """
  SECURITY

  """
  `EXECUTION` features provide metadata necessary for operation execution.
  """
  EXECUTION
}

type LinkAction implements Action
  @join__implements(graph: JOURNEYS, interface: "Action")
  @join__type(graph: JOURNEYS)
{
  parentBlockId: ID!
  gtmEventName: String
  url: String!
  target: String
}

input LinkActionInput
  @join__type(graph: JOURNEYS)
{
  gtmEventName: String
  url: String!
  target: String
}

enum MessagePlatform
  @join__type(graph: JOURNEYS)
{
  facebook
  telegram
  whatsApp
  instagram
  viber
  vk
  snapchat
  skype
  line
  tikTok
}

type Mutation
  @join__type(graph: JOURNEYS)
  @join__type(graph: MEDIA)
{
  blockDeleteAction(id: ID!, journeyId: ID!): Block! @join__field(graph: JOURNEYS)
  blockUpdateNavigateAction(id: ID!, journeyId: ID!, input: NavigateActionInput!): NavigateAction! @join__field(graph: JOURNEYS)
  blockUpdateNavigateToBlockAction(id: ID!, journeyId: ID!, input: NavigateToBlockActionInput!): NavigateToBlockAction! @join__field(graph: JOURNEYS)
  blockUpdateNavigateToJourneyAction(id: ID!, journeyId: ID!, input: NavigateToJourneyActionInput!): NavigateToJourneyAction! @join__field(graph: JOURNEYS)
  blockUpdateLinkAction(id: ID!, journeyId: ID!, input: LinkActionInput!): LinkAction! @join__field(graph: JOURNEYS)

  """blockDelete returns the updated sibling blocks on successful delete"""
  blockDelete(id: ID!, journeyId: ID!, parentBlockId: ID): [Block!]! @join__field(graph: JOURNEYS)

  """
  blockDuplicate returns the updated block, it's children and sibling blocks on successful duplicate
  """
  blockDuplicate(
    id: ID!
    journeyId: ID!

    """
    parentOrder defines the position to add the duplicated block. Negative values defines the position from the end of the array. Positions greater than the length of the array or null parentOrder will add duplicate at end of the array.
    """
    parentOrder: Int
  ): [Block!]! @join__field(graph: JOURNEYS)
  blockOrderUpdate(id: ID!, journeyId: ID!, parentOrder: Int!): [Block!]! @join__field(graph: JOURNEYS)
  buttonBlockCreate(input: ButtonBlockCreateInput!): ButtonBlock! @join__field(graph: JOURNEYS)
  buttonBlockUpdate(id: ID!, journeyId: ID!, input: ButtonBlockUpdateInput!): ButtonBlock @join__field(graph: JOURNEYS)
  cardBlockCreate(input: CardBlockCreateInput!): CardBlock! @join__field(graph: JOURNEYS)
  cardBlockUpdate(id: ID!, journeyId: ID!, input: CardBlockUpdateInput!): CardBlock! @join__field(graph: JOURNEYS)
  iconBlockCreate(input: IconBlockCreateInput!): IconBlock! @join__field(graph: JOURNEYS)
  iconBlockUpdate(id: ID!, journeyId: ID!, input: IconBlockUpdateInput!): IconBlock! @join__field(graph: JOURNEYS)
  imageBlockCreate(input: ImageBlockCreateInput!): ImageBlock! @join__field(graph: JOURNEYS)
  imageBlockUpdate(id: ID!, journeyId: ID!, input: ImageBlockUpdateInput!): ImageBlock! @join__field(graph: JOURNEYS)
  radioOptionBlockCreate(input: RadioOptionBlockCreateInput!): RadioOptionBlock! @join__field(graph: JOURNEYS)
  radioQuestionBlockCreate(input: RadioQuestionBlockCreateInput!): RadioQuestionBlock! @join__field(graph: JOURNEYS)
  radioOptionBlockUpdate(id: ID!, journeyId: ID!, input: RadioOptionBlockUpdateInput!): RadioOptionBlock! @join__field(graph: JOURNEYS)
  radioQuestionBlockUpdate(id: ID!, journeyId: ID!, parentBlockId: ID!): RadioQuestionBlock! @join__field(graph: JOURNEYS)
  signUpBlockCreate(input: SignUpBlockCreateInput!): SignUpBlock! @join__field(graph: JOURNEYS)
  signUpBlockUpdate(id: ID!, journeyId: ID!, input: SignUpBlockUpdateInput!): SignUpBlock @join__field(graph: JOURNEYS)
  stepBlockCreate(input: StepBlockCreateInput!): StepBlock! @join__field(graph: JOURNEYS)
  stepBlockUpdate(id: ID!, journeyId: ID!, input: StepBlockUpdateInput!): StepBlock! @join__field(graph: JOURNEYS)
  textResponseBlockCreate(input: TextResponseBlockCreateInput!): TextResponseBlock! @join__field(graph: JOURNEYS)
  textResponseBlockUpdate(id: ID!, journeyId: ID!, input: TextResponseBlockUpdateInput!): TextResponseBlock @join__field(graph: JOURNEYS)
  typographyBlockCreate(input: TypographyBlockCreateInput!): TypographyBlock! @join__field(graph: JOURNEYS)
  typographyBlockUpdate(id: ID!, journeyId: ID!, input: TypographyBlockUpdateInput!): TypographyBlock! @join__field(graph: JOURNEYS)
  videoBlockCreate(input: VideoBlockCreateInput!): VideoBlock! @join__field(graph: JOURNEYS)
  videoBlockUpdate(id: ID!, journeyId: ID!, input: VideoBlockUpdateInput!): VideoBlock! @join__field(graph: JOURNEYS)
  buttonClickEventCreate(input: ButtonClickEventCreateInput!): ButtonClickEvent! @join__field(graph: JOURNEYS)
  chatOpenEventCreate(input: ChatOpenEventCreateInput!): ChatOpenEvent! @join__field(graph: JOURNEYS)
  journeyViewEventCreate(input: JourneyViewEventCreateInput!): JourneyViewEvent! @join__field(graph: JOURNEYS)
  radioQuestionSubmissionEventCreate(input: RadioQuestionSubmissionEventCreateInput!): RadioQuestionSubmissionEvent! @join__field(graph: JOURNEYS)
  signUpSubmissionEventCreate(input: SignUpSubmissionEventCreateInput!): SignUpSubmissionEvent! @join__field(graph: JOURNEYS)
  stepViewEventCreate(input: StepViewEventCreateInput!): StepViewEvent! @join__field(graph: JOURNEYS)
  stepNextEventCreate(input: StepNextEventCreateInput!): StepNextEvent! @join__field(graph: JOURNEYS)
  textResponseSubmissionEventCreate(input: TextResponseSubmissionEventCreateInput!): TextResponseSubmissionEvent! @join__field(graph: JOURNEYS)
  videoStartEventCreate(input: VideoStartEventCreateInput!): VideoStartEvent! @join__field(graph: JOURNEYS)
  videoPlayEventCreate(input: VideoPlayEventCreateInput!): VideoPlayEvent! @join__field(graph: JOURNEYS)
  videoPauseEventCreate(input: VideoPauseEventCreateInput!): VideoPauseEvent! @join__field(graph: JOURNEYS)
  videoCompleteEventCreate(input: VideoCompleteEventCreateInput!): VideoCompleteEvent! @join__field(graph: JOURNEYS)
  videoExpandEventCreate(input: VideoExpandEventCreateInput!): VideoExpandEvent! @join__field(graph: JOURNEYS)
  videoCollapseEventCreate(input: VideoCollapseEventCreateInput!): VideoCollapseEvent! @join__field(graph: JOURNEYS)
  videoProgressEventCreate(input: VideoProgressEventCreateInput!): VideoProgressEvent! @join__field(graph: JOURNEYS)
  journeyCreate(input: JourneyCreateInput!): Journey! @join__field(graph: JOURNEYS)
  journeyDuplicate(id: ID!): Journey! @join__field(graph: JOURNEYS)
  journeyUpdate(id: ID!, input: JourneyUpdateInput!): Journey! @join__field(graph: JOURNEYS)

  """Sets journey status to published"""
  journeyPublish(id: ID!): Journey @join__field(graph: JOURNEYS)

  """Sets journeys statuses to archived"""
  journeysArchive(ids: [ID!]!): [Journey] @join__field(graph: JOURNEYS)

  """Sets journeys statuses to deleted"""
  journeysDelete(ids: [ID!]!): [Journey] @join__field(graph: JOURNEYS)

  """Sets journeys statuses to trashed"""
  journeysTrash(ids: [ID!]!): [Journey] @join__field(graph: JOURNEYS)

  """Sets journeys statuses to last active status"""
  journeysRestore(ids: [ID!]!): [Journey] @join__field(graph: JOURNEYS)

  """Updates template"""
  journeyTemplate(id: ID!, input: JourneyTemplateInput!): Journey! @join__field(graph: JOURNEYS)
  userInviteCreate(journeyId: ID!, input: UserInviteCreateInput): UserInvite! @join__field(graph: JOURNEYS)
  userInviteRemove(id: ID!, journeyId: ID!): UserInvite! @join__field(graph: JOURNEYS)
  userInviteAcceptAll: [UserInvite!]! @join__field(graph: JOURNEYS)
  userJourneyApprove(id: ID!): UserJourney! @join__field(graph: JOURNEYS)
  userJourneyPromote(id: ID!): UserJourney! @join__field(graph: JOURNEYS)
  userJourneyRemove(id: ID!): UserJourney! @join__field(graph: JOURNEYS)

  """Removes all userJourneys associated with a journeyId"""
  userJourneyRemoveAll(id: ID!): [UserJourney!]! @join__field(graph: JOURNEYS)
  userJourneyRequest(journeyId: ID!, idType: IdType): UserJourney! @join__field(graph: JOURNEYS)
  userJourneyOpen(id: ID!): UserJourney! @join__field(graph: JOURNEYS)

  """Update a visitor"""
  visitorUpdate(id: ID!, input: VisitorUpdateInput!): Visitor! @join__field(graph: JOURNEYS)
  deleteCloudflareImage(id: ID!): Boolean @join__field(graph: MEDIA)
}

"""
NavigateAction is an Action that navigates to the nextBlockId field set on the
closest ancestor StepBlock.
"""
type NavigateAction implements Action
  @join__implements(graph: JOURNEYS, interface: "Action")
  @join__type(graph: JOURNEYS)
{
  parentBlockId: ID!
  gtmEventName: String
}

input NavigateActionInput
  @join__type(graph: JOURNEYS)
{
  gtmEventName: String
}

type NavigateToBlockAction implements Action
  @join__implements(graph: JOURNEYS, interface: "Action")
  @join__type(graph: JOURNEYS)
{
  parentBlockId: ID!
  gtmEventName: String
  blockId: String!
}

input NavigateToBlockActionInput
  @join__type(graph: JOURNEYS)
{
  gtmEventName: String
  blockId: String!
}

type NavigateToJourneyAction implements Action
  @join__implements(graph: JOURNEYS, interface: "Action")
  @join__type(graph: JOURNEYS)
{
  parentBlockId: ID!
  gtmEventName: String
  journeyId: String!
  journey: Journey
}

input NavigateToJourneyActionInput
  @join__type(graph: JOURNEYS)
{
  gtmEventName: String
  journeyId: String!
}

type OperatingSystem
  @join__type(graph: JOURNEYS)
{
  name: String
  version: String
}

"""Information about pagination in a connection."""
type PageInfo
  @join__type(graph: JOURNEYS)
{
  """When paginating forwards, are there more items?"""
  hasNextPage: Boolean!

  """When paginating backwards, the cursor to continue."""
  startCursor: String

  """When paginating forwards, the cursor to continue."""
  endCursor: String
}

type PowerBiEmbed
  @join__type(graph: JOURNEYS)
{
  """The report ID"""
  reportId: String!

  """The name of the report"""
  reportName: String!

  """The embed URL of the report"""
  embedUrl: String!

  """The embed token"""
  accessToken: String!

  """The date and time (UTC) of token expiration"""
  expiration: String!
}

type Query
  @join__type(graph: JOURNEYS)
  @join__type(graph: LANGUAGES)
  @join__type(graph: MEDIA)
  @join__type(graph: USERS)
  @join__type(graph: VIDEOS)
{
  adminJourneys(status: [JourneyStatus!], template: Boolean): [Journey!]! @join__field(graph: JOURNEYS)
  adminJourneysReport(reportType: JourneysReportType!): PowerBiEmbed @join__field(graph: JOURNEYS)
  adminJourney(id: ID!, idType: IdType): Journey @join__field(graph: JOURNEYS)
  journeys(where: JourneysFilter): [Journey!]! @join__field(graph: JOURNEYS)
  journey(id: ID!, idType: IdType): Journey @join__field(graph: JOURNEYS)
  userInvites(journeyId: ID!): [UserInvite!] @join__field(graph: JOURNEYS)
  getUserRole: UserRole @join__field(graph: JOURNEYS)

  """A list of visitors that are connected with a specific team."""
  visitorsConnection(
    """Returns the visitor items related to a specific team."""
    teamId: String!

    """Returns the first n elements from the list."""
    first: Int

    """Returns the elements in the list that come after the specified cursor."""
    after: String
  ): VisitorsConnection! @join__field(graph: JOURNEYS)

  """Get a single visitor"""
  visitor(id: ID!): Visitor! @join__field(graph: JOURNEYS)
  countries: [Country!]! @join__field(graph: LANGUAGES)
  country(id: ID!, idType: IdType): Country! @join__field(graph: LANGUAGES)
  languages(offset: Int, limit: Int): [Language!]! @join__field(graph: LANGUAGES)
  language(id: ID!, idType: LanguageIdType): Language @join__field(graph: LANGUAGES)
  createCloudflareImage: CloudflareImage @join__field(graph: MEDIA)
  getMyCloudflareImages: [CloudflareImage] @join__field(graph: MEDIA)
  me: User @join__field(graph: USERS)
  videos(where: VideosFilter, offset: Int, limit: Int): [Video!]! @join__field(graph: VIDEOS)
  video(id: ID!, idType: IdType): Video @join__field(graph: VIDEOS)
}

type RadioOptionBlock implements Block
  @join__implements(graph: JOURNEYS, interface: "Block")
  @join__type(graph: JOURNEYS)
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  label: String!
  action: Action
}

input RadioOptionBlockCreateInput
  @join__type(graph: JOURNEYS)
{
  id: ID
  journeyId: ID!
  parentBlockId: ID!
  label: String!
}

input RadioOptionBlockUpdateInput
  @join__type(graph: JOURNEYS)
{
  parentBlockId: ID
  label: String
}

type RadioQuestionBlock implements Block
  @join__implements(graph: JOURNEYS, interface: "Block")
  @join__type(graph: JOURNEYS)
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
}

input RadioQuestionBlockCreateInput
  @join__type(graph: JOURNEYS)
{
  id: ID
  journeyId: ID!
  parentBlockId: ID!
}

type RadioQuestionSubmissionEvent implements Event
  @join__implements(graph: JOURNEYS, interface: "Event")
  @join__type(graph: JOURNEYS)
{
  id: ID!

  """ID of the journey that the radioQuestionBlock belongs to"""
  journeyId: ID!

  """time event was created"""
  createdAt: DateTime!

  """stepName of the parent stepBlock"""
  label: String

  """label of the selected radioOptionBlock"""
  value: String
}

input RadioQuestionSubmissionEventCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Event UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  blockId: ID!
  radioOptionBlockId: ID!

  """id of the parent stepBlock"""
  stepId: ID

  """stepName of the parent stepBlock"""
  label: String

  """label of the selected radioOption block"""
  value: String
}

enum Role
  @join__type(graph: JOURNEYS)
{
  """
  User can create templates and
  add them to template library
  """
  publisher
}

type SignUpBlock implements Block
  @join__implements(graph: JOURNEYS, interface: "Block")
  @join__type(graph: JOURNEYS)
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  action: Action
  submitIconId: ID
  submitLabel: String
}

input SignUpBlockCreateInput
  @join__type(graph: JOURNEYS)
{
  id: ID
  journeyId: ID!
  parentBlockId: ID!
  submitLabel: String!
}

input SignUpBlockUpdateInput
  @join__type(graph: JOURNEYS)
{
  parentBlockId: ID
  submitIconId: ID
  submitLabel: String
}

type SignUpSubmissionEvent implements Event
  @join__implements(graph: JOURNEYS, interface: "Event")
  @join__type(graph: JOURNEYS)
{
  id: ID!

  """ID of the journey that the block belongs to"""
  journeyId: ID!

  """time event was created"""
  createdAt: DateTime!

  """null for signUpSubmissionEvent"""
  label: String

  """name from the signUpBlock form"""
  value: String

  """email from the signUpBlock form"""
  email: String
}

input SignUpSubmissionEventCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Event UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  blockId: ID!

  """id of the parent stepBlock"""
  stepId: ID

  """name from the signUpBlock form"""
  name: String!

  """email from the signUpBlock form"""
  email: String!
}

type StepBlock implements Block
  @join__implements(graph: JOURNEYS, interface: "Block")
  @join__type(graph: JOURNEYS)
{
  id: ID!
  journeyId: ID!

  """
  nextBlockId contains the preferred block to navigate to when a
  NavigateAction occurs or if the user manually tries to advance to the next
  step. If no nextBlockId is set it will automatically navigate to the next
  step in the journey based on parentOrder.
  """
  nextBlockId: ID

  """
  locked will be set to true if the user should not be able to manually
  advance to the next step.
  """
  locked: Boolean!
  parentBlockId: ID
  parentOrder: Int
}

input StepBlockCreateInput
  @join__type(graph: JOURNEYS)
{
  id: ID
  journeyId: ID!
  nextBlockId: ID
  locked: Boolean
}

input StepBlockUpdateInput
  @join__type(graph: JOURNEYS)
{
  nextBlockId: ID
  locked: Boolean
}

type StepNextEvent implements Event
  @join__implements(graph: JOURNEYS, interface: "Event")
  @join__type(graph: JOURNEYS)
{
  id: ID!

  """ID of the journey that the stepBlock belongs to"""
  journeyId: ID!

  """time event was created"""
  createdAt: DateTime!

  """stepName of the stepBlock"""
  label: String

  """stepName of the next stepBlock"""
  value: String
}

input StepNextEventCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Event UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  blockId: ID!

  """id of the mext stepBlock"""
  nextStepId: ID!

  """stepName of the stepBlock"""
  label: String

  """stepName of the next stepBlock"""
  value: String
}

type StepViewEvent implements Event
  @join__implements(graph: JOURNEYS, interface: "Event")
  @join__type(graph: JOURNEYS)
{
  id: ID!

  """ID of the journey that the stepBlock belongs to"""
  journeyId: ID!

  """time event was created"""
  createdAt: DateTime!

  """null for stepViewEvent"""
  label: String

  """stepName of the stepBlock"""
  value: String
}

input StepViewEventCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Event UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  blockId: ID!

  """stepName of the stepBlock"""
  value: String
}

type TextResponseBlock implements Block
  @join__implements(graph: JOURNEYS, interface: "Block")
  @join__type(graph: JOURNEYS)
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  label: String!
  hint: String
  minRows: Int
  action: Action
  submitIconId: ID
  submitLabel: String
}

input TextResponseBlockCreateInput
  @join__type(graph: JOURNEYS)
{
  id: ID
  journeyId: ID!
  parentBlockId: ID!
  label: String!
  submitLabel: String!
}

input TextResponseBlockUpdateInput
  @join__type(graph: JOURNEYS)
{
  parentBlockId: ID
  label: String
  hint: String
  minRows: Int
  submitIconId: ID
  submitLabel: String
}

type TextResponseSubmissionEvent implements Event
  @join__implements(graph: JOURNEYS, interface: "Event")
  @join__type(graph: JOURNEYS)
{
  id: ID!

  """ID of the journey that the buttonBlock belongs to"""
  journeyId: ID!

  """time event was created"""
  createdAt: DateTime!

  """stepName of the parent stepBlock"""
  label: String

  """response from the TextResponseBlock form"""
  value: String
}

input TextResponseSubmissionEventCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Event UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  blockId: ID!

  """id of the parent stepBlock"""
  stepId: ID

  """stepName of the parent stepBlock"""
  label: String

  """response from the TextResponseBlock form"""
  value: String!
}

enum ThemeMode
  @join__type(graph: JOURNEYS)
{
  dark
  light
}

enum ThemeName
  @join__type(graph: JOURNEYS)
{
  base
}

type Translation
  @join__type(graph: LANGUAGES)
  @join__type(graph: VIDEOS)
{
  value: String!
  language: Language!
  primary: Boolean!
}

enum TypographyAlign
  @join__type(graph: JOURNEYS)
{
  left
  center
  right
}

type TypographyBlock implements Block
  @join__implements(graph: JOURNEYS, interface: "Block")
  @join__type(graph: JOURNEYS)
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int
  content: String!
  variant: TypographyVariant
  color: TypographyColor
  align: TypographyAlign
}

input TypographyBlockCreateInput
  @join__type(graph: JOURNEYS)
{
  id: ID
  journeyId: ID!
  parentBlockId: ID!
  content: String!
  variant: TypographyVariant
  color: TypographyColor
  align: TypographyAlign
}

input TypographyBlockUpdateInput
  @join__type(graph: JOURNEYS)
{
  parentBlockId: ID
  content: String
  variant: TypographyVariant
  color: TypographyColor
  align: TypographyAlign
}

enum TypographyColor
  @join__type(graph: JOURNEYS)
{
  primary
  secondary
  error
}

enum TypographyVariant
  @join__type(graph: JOURNEYS)
{
  h1
  h2
  h3
  h4
  h5
  h6
  subtitle1
  subtitle2
  body1
  body2
  caption
  overline
}

type User
  @join__type(graph: JOURNEYS, key: "id")
  @join__type(graph: USERS, key: "id")
{
  id: ID!
  firstName: String! @join__field(graph: USERS)
  lastName: String @join__field(graph: USERS)
  email: String! @join__field(graph: USERS)
  imageUrl: String @join__field(graph: USERS)
}

"""These types are a subset provided by the @types/ua-parser-js library."""
type UserAgent
  @join__type(graph: JOURNEYS)
{
  browser: Browser!
  device: Device!
  os: OperatingSystem!
}

type UserInvite
  @join__type(graph: JOURNEYS, key: "id")
{
  id: ID!
  journeyId: ID!
  senderId: ID!
  email: String!
  acceptedAt: DateTime
  removedAt: DateTime
}

input UserInviteCreateInput
  @join__type(graph: JOURNEYS)
{
  email: String!
}

type UserJourney
  @join__type(graph: JOURNEYS, key: "id")
{
  journey: Journey
  id: ID!
  userId: ID!
  journeyId: ID!
  role: UserJourneyRole!
  user: User

  """Date time of when the journey was first opened"""
  openedAt: DateTime
}

enum UserJourneyRole
  @join__type(graph: JOURNEYS)
{
  inviteRequested
  editor
  owner
}

type UserRole
  @join__type(graph: JOURNEYS, key: "id")
{
  id: ID!
  userId: ID!
  roles: [Role!]
}

type Video
  @join__type(graph: JOURNEYS, key: "id primaryLanguageId")
  @join__type(graph: VIDEOS, key: "id primaryLanguageId")
{
  id: ID!
  primaryLanguageId: ID!
  label: VideoLabel! @join__field(graph: VIDEOS)
  title(languageId: ID, primary: Boolean): [Translation!]! @join__field(graph: VIDEOS)
  seoTitle(languageId: ID, primary: Boolean): [Translation!]! @join__field(graph: VIDEOS)
  snippet(languageId: ID, primary: Boolean): [Translation!]! @join__field(graph: VIDEOS)
  description(languageId: ID, primary: Boolean): [Translation!]! @join__field(graph: VIDEOS)
  studyQuestions(languageId: ID, primary: Boolean): [Translation!]! @join__field(graph: VIDEOS)
  image: String @join__field(graph: VIDEOS)
  imageAlt(languageId: ID, primary: Boolean): [Translation!]! @join__field(graph: VIDEOS)
  variantLanguages: [Language!]! @join__field(graph: VIDEOS)
  variantLanguagesCount: Int! @join__field(graph: VIDEOS)

  """slug is a permanent link to the video."""
  slug: String! @join__field(graph: VIDEOS)
  noIndex: Boolean @join__field(graph: VIDEOS)
  children: [Video!]! @join__field(graph: VIDEOS)

  """the number value of the amount of children on a video"""
  childrenCount: Int! @join__field(graph: VIDEOS)
  variantLanguagesWithSlug: [LanguageWithSlug!]! @join__field(graph: VIDEOS)
  variant(languageId: ID): VideoVariant @join__field(graph: VIDEOS)
}

type VideoBlock implements Block
  @join__implements(graph: JOURNEYS, interface: "Block")
  @join__type(graph: JOURNEYS)
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int

  """startAt dictates at which point of time the video should start playing"""
  startAt: Int

  """endAt dictates at which point of time the video should end"""
  endAt: Int
  muted: Boolean
  autoplay: Boolean

  """
  posterBlockId is present if a child block should be used as a poster.
  This child block should not be rendered normally, instead it should be used
  as the video poster. PosterBlock should be of type ImageBlock.
  """
  posterBlockId: ID
  fullsize: Boolean

  """
  internal source videos: video is only populated when videoID and
  videoVariantLanguageId are present
  """
  video: Video

  """
  internal source videos: videoId and videoVariantLanguageId both need to be set
  to select a video.
  For other sources only videoId needs to be set.
  """
  videoId: ID

  """
  internal source videos: videoId and videoVariantLanguageId both need to be set
  to select a video.
  For other sources only videoId needs to be set.
  """
  videoVariantLanguageId: ID

  """
  internal source: videoId, videoVariantLanguageId, and video present
  youTube source: videoId, title, description, and duration present
  """
  source: VideoBlockSource!

  """
  internal source videos: this field is not populated and instead only present
  in the video field.
  For other sources this is automatically populated.
  """
  title: String

  """
  internal source videos: this field is not populated and instead only present
  in the video field
  For other sources this is automatically populated.
  """
  description: String

  """
  internal source videos: this field is not populated and instead only present
  in the video field
  For other sources this is automatically populated.
  """
  image: String

  """
  internal source videos: this field is not populated and instead only present
  in the video field
  For other sources this is automatically populated.
  duration in seconds.
  """
  duration: Int

  """action that should be performed when the video ends"""
  action: Action

  """how the video should display within the VideoBlock"""
  objectFit: VideoBlockObjectFit
}

input VideoBlockCreateInput
  @join__type(graph: JOURNEYS)
{
  id: ID
  journeyId: ID!
  parentBlockId: ID!

  """startAt dictates at which point of time the video should start playing"""
  startAt: Int

  """endAt dictates at which point of time the video should end"""
  endAt: Int
  description: String
  muted: Boolean
  autoplay: Boolean

  """
  internal source videos: videoId and videoVariantLanguageId both need to be set
  to select a video.
  For other sources only videoId needs to be set.
  """
  videoId: ID

  """
  internal source videos: videoId and videoVariantLanguageId both need to be set
  to select a video.
  For other sources only videoId needs to be set.
  """
  videoVariantLanguageId: ID

  """
  internal source: videoId and videoVariantLanguageId required
  youTube source: videoId required
  """
  source: VideoBlockSource

  """
  posterBlockId is present if a child block should be used as a poster.
  This child block should not be rendered normally, instead it should be used
  as the video poster. PosterBlock should be of type ImageBlock.
  """
  posterBlockId: ID
  fullsize: Boolean

  """
  True if the coverBlockId in a parent block should be set to this block's id.
  """
  isCover: Boolean

  """how the video should display within the VideoBlock"""
  objectFit: VideoBlockObjectFit
}

enum VideoBlockObjectFit
  @join__type(graph: JOURNEYS)
{
  """
  The video is scaled to maintain its aspect ratio while filling the
   entire VideoBlock. If the video's aspect ratio does not match the
   aspect ratio of the VideoBlock, then the video will be clipped to fit.
  """
  fill

  """
  The video is scaled to maintain its aspect ratio while fitting within the
   VideoBlock. The entire video is made to fill the VideoBlock, while
   preserving its aspect ratio, so the video will be "letterboxed" if its
   aspect ratio does not match the aspect ratio of the VideoBlock.
  """
  fit

  """
  12.5% of either side of the video is discarded (this has the effect of
   converting a 16:9 aspect ratio to 4:3). The remaining video is scaled to
   maintain its new aspect ratio while fitting within the VideoBlock.  The
   remaining video is made to fill the VideoBlock, while preserving its new
   aspect ratio, so the video will be "letterboxed" if its new aspect ratio
   does not match the aspect ratio of the VideoBlock.
  """
  zoomed
}

enum VideoBlockSource
  @join__type(graph: JOURNEYS)
{
  internal
  youTube
}

input VideoBlockUpdateInput
  @join__type(graph: JOURNEYS)
{
  """startAt dictates at which point of time the video should start playing"""
  startAt: Int

  """endAt dictates at which point of time the video should end"""
  endAt: Int
  muted: Boolean
  autoplay: Boolean

  """
  internal source videos: videoId and videoVariantLanguageId both need to be set
  to select a video.
  For other sources only videoId needs to be set.
  """
  videoId: ID

  """
  internal source videos: videoId and videoVariantLanguageId both need to be set
  to select a video.
  For other sources only videoId needs to be set.
  """
  videoVariantLanguageId: ID

  """
  internal source: videoId and videoVariantLanguageId required
  youTube source: videoId required
  """
  source: VideoBlockSource

  """
  posterBlockId is present if a child block should be used as a poster.
  This child block should not be rendered normally, instead it should be used
  as the video poster. PosterBlock should be of type ImageBlock.
  """
  posterBlockId: ID
  fullsize: Boolean

  """how the video should display within the VideoBlock"""
  objectFit: VideoBlockObjectFit
}

type VideoCollapseEvent implements Event
  @join__implements(graph: JOURNEYS, interface: "Event")
  @join__type(graph: JOURNEYS)
{
  id: ID!

  """ID of the journey that the videoBlock belongs to"""
  journeyId: ID!

  """time event was created"""
  createdAt: DateTime!

  """title of the video"""
  label: String

  """source of the video"""
  value: String

  """duration of the video played when the VideoCollapseEvent is triggered"""
  position: Float

  """source of the video (based on the source in the value field)"""
  source: VideoBlockSource
}

input VideoCollapseEventCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Event UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  blockId: ID!

  """id of the parent stepBlock"""
  stepId: ID

  """duration of the video played when the VideoCollapseEvent is triggered"""
  position: Float

  """title of the video"""
  label: String

  """source of the video"""
  value: VideoBlockSource
}

type VideoCompleteEvent implements Event
  @join__implements(graph: JOURNEYS, interface: "Event")
  @join__type(graph: JOURNEYS)
{
  id: ID!

  """ID of the journey that the videoBlock belongs to"""
  journeyId: ID!

  """time event was created"""
  createdAt: DateTime!

  """title of the video"""
  label: String

  """source of the video"""
  value: String

  """duration of the video played when the VideoCompleteEvent is triggered"""
  position: Float

  """source of the video (based on the source in the value field)"""
  source: VideoBlockSource
}

input VideoCompleteEventCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Event UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  blockId: ID!

  """id of the parent stepBlock"""
  stepId: ID

  """duration of the video played when the VideoCompleteEvent is triggered"""
  position: Float

  """title of the video"""
  label: String

  """source of the video"""
  value: VideoBlockSource
}

type VideoExpandEvent implements Event
  @join__implements(graph: JOURNEYS, interface: "Event")
  @join__type(graph: JOURNEYS)
{
  id: ID!

  """ID of the journey that the videoBlock belongs to"""
  journeyId: ID!

  """time event was created"""
  createdAt: DateTime!

  """title of the video"""
  label: String

  """source of the video"""
  value: String

  """duration of the video played when the VideoExpandEvent is triggered"""
  position: Float

  """source of the video (based on the source in the value field)"""
  source: VideoBlockSource
}

input VideoExpandEventCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Event UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  blockId: ID!

  """id of the parent stepBlock"""
  stepId: ID

  """duration of the video played when the VideoExpandEvent is triggered"""
  position: Float

  """title of the video"""
  label: String

  """source of the video"""
  value: VideoBlockSource
}

enum VideoLabel
  @join__type(graph: VIDEOS)
{
  collection
  episode
  featureFilm
  segment
  series
  shortFilm
}

type VideoPauseEvent implements Event
  @join__implements(graph: JOURNEYS, interface: "Event")
  @join__type(graph: JOURNEYS)
{
  id: ID!

  """ID of the journey that the videoBlock belongs to"""
  journeyId: ID!

  """time event was created"""
  createdAt: DateTime!

  """title of the video"""
  label: String

  """source of the video"""
  value: String

  """duration of the video played when the VideoPauseEvent is triggered"""
  position: Float

  """source of the video (based on the source in the value field)"""
  source: VideoBlockSource
}

input VideoPauseEventCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Event UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  blockId: ID!

  """id of the parent stepBlock"""
  stepId: ID

  """duration of the video played when the VideoPauseEvent is triggered"""
  position: Float

  """title of the video"""
  label: String

  """source of the video"""
  value: VideoBlockSource
}

type VideoPlayEvent implements Event
  @join__implements(graph: JOURNEYS, interface: "Event")
  @join__type(graph: JOURNEYS)
{
  id: ID!

  """ID of the journey that the videoBlock belongs to"""
  journeyId: ID!

  """time event was created"""
  createdAt: DateTime!

  """title of the video"""
  label: String

  """source of the video"""
  value: String

  """duration of the video played when the VideoPlayEvent is triggered"""
  position: Float

  """source of the video (based on the source in the value field)"""
  source: VideoBlockSource
}

input VideoPlayEventCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Event UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  blockId: ID!

  """id of the parent stepBlock"""
  stepId: ID

  """duration of the video played when the VideoPlayEvent is triggered"""
  position: Float

  """title of the video"""
  label: String

  """source of the video"""
  value: VideoBlockSource
}

type VideoProgressEvent implements Event
  @join__implements(graph: JOURNEYS, interface: "Event")
  @join__type(graph: JOURNEYS)
{
  id: ID!

  """ID of the journey that the videoBlock belongs to"""
  journeyId: ID!

  """time event was created"""
  createdAt: DateTime!

  """title of the video"""
  label: String

  """source of the video"""
  value: String

  """duration of the video played when the VideoProgressEvent is triggered"""
  position: Float

  """source of the video (based on the source in the value field)"""
  source: VideoBlockSource

  """
  progress is a integer indicating the precentage completion from the startAt to the endAt times of the videoBlock
  """
  progress: Int!
}

input VideoProgressEventCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Event UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  blockId: ID!

  """id of the parent stepBlock"""
  stepId: ID

  """duration of the video played when the VideoProgressEvent is triggered"""
  position: Float

  """
  progress is a integer indicating the precentage completion from the startAt to the endAt times of the videoBlock
  """
  progress: Int!

  """title of the video"""
  label: String

  """source of the video"""
  value: VideoBlockSource
}

input VideosFilter
  @join__type(graph: VIDEOS)
{
  availableVariantLanguageIds: [ID!]
  title: String
  labels: [VideoLabel!]
  ids: [ID!]
  subtitleLanguageIds: [ID!]
}

type VideoStartEvent implements Event
  @join__implements(graph: JOURNEYS, interface: "Event")
  @join__type(graph: JOURNEYS)
{
  id: ID!

  """ID of the journey that the videoBlock belongs to"""
  journeyId: ID!

  """time event was created"""
  createdAt: DateTime!

  """title of the video"""
  label: String

  """source of the video"""
  value: String

  """duration of the video played when the VideoStartEvent is triggered"""
  position: Float

  """source of the video (based on the source in the value field)"""
  source: VideoBlockSource
}

input VideoStartEventCreateInput
  @join__type(graph: JOURNEYS)
{
  """
  ID should be unique Event UUID (Provided for optimistic mutation result matching)
  """
  id: ID
  blockId: ID!

  """id of the parent stepBlock"""
  stepId: ID

  """duration of the video played when the VideoStartEvent is triggered"""
  position: Float

  """title of the video"""
  label: String

  """source of the video"""
  value: VideoBlockSource
}

"""
VideoTriggerBlock is a block that indicates the video to navigate
to the next block at the designated time.
"""
type VideoTriggerBlock implements Block
  @join__implements(graph: JOURNEYS, interface: "Block")
  @join__type(graph: JOURNEYS)
{
  id: ID!
  journeyId: ID!
  parentBlockId: ID
  parentOrder: Int

  """
  triggerStart sets the time as to when a video navigates to the next block,
  this is the number of seconds since the start of the video
  """
  triggerStart: Int!
  action: Action!
}

type VideoVariant
  @join__type(graph: VIDEOS)
{
  id: String!
  hls: String
  downloads: [VideoVariantDownload!]!
  duration: Int!
  language: Language!
  subtitle(languageId: ID, primary: Boolean): [Translation!]!
  subtitleCount: Int!

  """slug is a permanent link to the video variant."""
  slug: String!
}

type VideoVariantDownload
  @join__type(graph: VIDEOS)
{
  quality: VideoVariantDownloadQuality!
  size: Float!
  url: String!
}

enum VideoVariantDownloadQuality
  @join__type(graph: VIDEOS)
{
  low
  high
}

"""A visitor with attributes connected to a team."""
type Visitor
  @join__type(graph: JOURNEYS, key: "id")
{
  id: ID!

  """
  The time when the visitor created their first event on a journey connected
  to the requested team.
  """
  createdAt: DateTime!

  """
  The last time the visitor called the ButtonClickEvent mutation where the url
  is in the format of a recognized chat platform.
  """
  lastChatStartedAt: DateTime

  """
  The user agent of the visitor as poulated by the visitor's user-agent string
  detected in the JourneyViewEventCreate mutation. This field is enriched
  by data from the ua-parser-js library. If this field is empty it is likely
  that the JourneyViewEventCreate mutation was not called by the visitor.
  """
  userAgent: UserAgent

  """
  The country code of the visitor as poulated by visitor ip address detected in
  the JourneyViewEventCreate mutation. This field country code is converted
  from an IP address by the @maxmind/geoip2-node library. If this field is empty
  it is likely that the JourneyViewEventCreate mutation was not called by the
  visitor or that the country was not able to be determined based on the
  visitor IP address.
  """
  countryCode: String

  """
  The name of the visitor as populated by VisitorUpdate mutation or
  SignUpEventSubmissionEventCreate mutation.
  """
  name: String

  """
  The email address of the visitor as populated by VisitorUpdate mutation or
  SignUpEventSubmissionEventCreate mutation.
  """
  email: String

  """Status of the visitor as populated by VisitorUpdate mutation."""
  status: VisitorStatus

  """
  Message platform the visitor wishes to be connected to us on as populated by
  VisitorUpdate mutation or ChatOpenEventCreate mutation.
  """
  messagePlatform: MessagePlatform

  """
  ID of the visitor as set by VisitorUpdate mutation. This could be a phone
  number, user id or other unique identifier provided by the message platform.
  """
  messagePlatformId: String

  """Private notes of the visitor as set by VisitorUpdate mutation."""
  notes: String
  events: [Event!]!
}

"""An edge in a connection."""
type VisitorEdge
  @join__type(graph: JOURNEYS)
{
  """A cursor for use in pagination."""
  cursor: String!

  """The item at the end of the edge."""
  node: Visitor!
}

"""A list of visitors connected with a team."""
type VisitorsConnection
  @join__type(graph: JOURNEYS)
{
  """A list of edges."""
  edges: [VisitorEdge!]!

  """Information to aid in pagination."""
  pageInfo: PageInfo!
}

"""
The status of a visitor according to team members interacting with the
visitor admin interface. This enum should map to an emoji when displayed
(names here match Apple's emoji name)
"""
enum VisitorStatus
  @join__type(graph: JOURNEYS)
{
  star
  prohibited
  checkMarkSymbol
  thumbsUp
  thumbsDown
  partyPopper
  warning
  robotFace
  redExclamationMark
  redQuestionMark
}

"""
A list of fields to update a visitor when calling the visitorUpdate mutation
"""
input VisitorUpdateInput
  @join__type(graph: JOURNEYS)
{
  """
  The email address of the visitor (will prevent
  SignUpEventSubmissionEventCreate mutation from updating this field
  automatically)
  """
  email: String

  """
  ID of the visitor. This could be a phone number, user id or other unique
  identifier provided by the message platform.
  """
  messagePlatformId: String

  """
  Message platform the visitor wishes to be connected to us on (will prevent
  ChatOpenEventCreate mutation from updating this field automatically)
  """
  messagePlatform: MessagePlatform

  """
  The name of the visitor (will prevent SignUpEventSubmissionEventCreate
  mutation from updating this field automatically)
  """
  name: String

  """
  Private notes relating to the visitor. This information is never made public
  and only accessible by team members.
  """
  notes: String

  """Status of the visitor."""
  status: VisitorStatus
}